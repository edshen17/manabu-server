(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b59a3fe"],{"16c0":function(e,t,a){"use strict";a("a1f3")},"2ffc":function(e,t,a){"use strict";a("8527")},"354a":function(e,t,a){"use strict";var s=a("d79d"),r=a.n(s),n=function(e,t,a,s,n){return t&&a||(t="SGD",a="SGD"),r.a.rates=n,s?r.a.convert(e,{from:t,to:a}):Math.round(r.a.convert(e,{from:t,to:a}))};t["a"]=n},3656:function(e,t,a){"use strict";a("96cf");var s=a("1da1"),r=a("bc3a"),n=a.n(r),i=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.a.get("/api/utils/exchangeRate",{headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){throw e}));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t["a"]=i},"45fc":function(e,t,a){"use strict";var s=a("23e7"),r=a("b727").some,n=a("a640"),i=a("ae40"),o=n("some"),c=i("some");s({target:"Array",proto:!0,forced:!o||!c},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},6577:function(e,t,a){},8527:function(e,t,a){},"9f73":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.viewingUserData?a("div",{staticClass:"user-profile"},[e.loading?a("div",[a("div",{staticClass:"d-flex justify-content-center my-4"},[a("b-spinner",{attrs:{label:"Loading..."}})],1)]):a("div",{staticClass:"mt-4"},[e.viewingUserData.teacherData?a("teacher-profile",{attrs:{viewingUserData:e.viewingUserData,myUserData:e.myUserData,packages:e.packages,exchangeRates:e.exchangeRates}}):a("student-profile",{attrs:{viewingUserData:e.viewingUserData,myUserData:e.myUserData}})],1)]):e._e()},r=[],n=(a("96cf"),a("1da1")),i=a("e8c2"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teacher-profile"},[a("b-modal",{attrs:{id:"price-modal",title:e.priceModalText.priceModalTitle,size:"lg"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{on:{click:function(t){return e.$bvModal.hide("price-modal")}}},[e._v(" "+e._s(e.$t("modal.cancel"))+" ")]),a("b-button",{attrs:{variant:"primary"},on:{click:e.onConfirm}},[e._v(" "+e._s(e.$t("modal.continue"))+" ")])]},proxy:!0}])},[a("b-form-select",{directives:[{name:"show",rawName:"v-show",value:e.teachingLanguages.length>1,expression:"teachingLanguages.length > 1"}],attrs:{options:e.optionsLanguage},model:{value:e.selectedLanguage,callback:function(t){e.selectedLanguage=t},expression:"selectedLanguage"}}),a("b-form-group",{staticClass:"mt-2",attrs:{label:e.priceModalText.lessonPlan},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.ariaDescribedby;return[a("b-form-radio-group",{attrs:{options:e.optionsPlan,"aria-describedby":s,name:"plans"},model:{value:e.selectedPlan,callback:function(t){e.selectedPlan=t},expression:"selectedPlan"}})]}}])}),a("b-form-group",{staticClass:"mt-2",attrs:{label:e.priceModalText.lessonDuration},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.ariaDescribedby;return[a("b-form-radio-group",{attrs:{options:e.optionsDuration,"aria-describedby":s,name:"durations"},model:{value:e.selectedDuration,callback:function(t){e.selectedDuration=t},expression:"selectedDuration"}})]}}])}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.selectedDuration,expression:"selectedDuration"}],staticClass:"mb-2",staticStyle:{"font-weight":"bold",display:"block"}},[e._v(e._s(e.priceModalText.estimatedPrice)+" "+e._s(e.convertMoney(e.selectedDuration/60*e.viewingUserData.teacherData.hourlyRate.amount*e.selectedPackageData.lessonAmount,e.selectedPackageData.priceDetails.currency,e.myUserData.settings.currency,!0,e.exchangeRates).toFixed(2).toLocaleString())+" "+e._s(e.myUserData.settings.currency)+" ")]),a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.priceModalText.disclaimerText.disclaimer))]),a("ul",[a("li",{staticClass:"mt-2",staticStyle:{"font-size":"0.9rem"}},[e._v(" "+e._s(e.priceModalText.disclaimerText.minuteBank)+" ")]),a("li",{staticClass:"mt-2",staticStyle:{"font-size":"0.9rem"}},[e._v(" "+e._s(e.priceModalText.disclaimerText.expiration)+" ")])])],1),a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{lg:"2"}}),a("b-col",{staticStyle:{"z-index":"100"},attrs:{lg:"5"}},[a("div",{staticClass:"card mb-3 shadow border-0"},[a("div",{staticClass:"embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"embed-responsive-item",attrs:{src:this.viewingUserData.teacherData.introductionVideo,allowfullscreen:""}})]),a("div",{staticClass:"card-body"},[a("b-container",[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("div",{staticClass:"my-2"},[a("span",[a("h3",{staticStyle:{display:"inline"}},[e._v(" "+e._s(this.viewingUserData.name)+" ")]),this.viewingUserData.teacherData.isApproved||this.isApproved?a("b-icon-patch-check-fll",{staticClass:"ml-2 patch-icon",attrs:{title:e.teacherSince}}):a("b-icon-patch-minus-fll",{staticClass:"ml-2 patch-icon",attrs:{title:e.teacherProfileText.appPending}}),e.viewingUserData._id!=e.myUserData._id&&e.myUserData._id?a("b-dropdown",{staticClass:"float-right no-padding",attrs:{size:"lg",variant:"transparent","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"fas fa-ellipsis-v"})]},proxy:!0}],null,!1,3452768261)},["admin"==e.myUserData.role?a("div",[e.viewingUserData.teacherAppPending&&!this.isApproved?a("b-dropdown-item",{on:{click:function(t){return e.approveTeacher(e.viewingUserData._id)}}},[e._v(" "+e._s(e.teacherProfileText.approveApp)+" ")]):e._e(),e.viewingUserData.teacherData.licensePath&&"licensed"==e.viewingUserData.teacherData.teacherType?a("b-dropdown-item",{attrs:{href:e.viewingUserData.teacherData.licensePath,target:"_blank"}},[e._v(" "+e._s(e.teacherProfileText.viewLicense)+" ")]):e._e()],1):e._e(),a("b-dropdown-item",[e._v(e._s(e.$t("profile.common.report")))]),a("b-dropdown-item",[e._v(e._s(e.$t("profile.common.block")))])],1):e._e(),a("div",{staticClass:"card-text"},[a("small",{staticClass:"text-muted"},[e._v(" "+e._s(e.$t("profile.common.lastOnline",{date:e.formatDate(e.viewingUserData.lastOnline,"fromNow")}))+" ")])])],1),a("div",{staticClass:"text-muted font-weight-light mt-2"},[a("div",[a("span",{staticStyle:{"font-size":"1.1rem"}},[a("span",{staticClass:"light-bold"},[e._v(" "+e._s(e.formatString(this.viewingUserData.teacherData.teacherType,["licensed","unlicensed"],e.teacherTypes))+" ")]),e._l(e.teachingLanguages,(function(t){return a("div",{key:t.language,staticClass:"mr-2",staticStyle:{display:"inline"}},[a("span",[e._v(" "+e._s(e.$t("localeCodes."+t.language))+" ")]),e._l(5,(function(s,r){return a("span",{key:r,staticClass:"level",class:e.languageLevelBars(t,r)})}))],2)})),e._l(e.otherLanguages,(function(t,s){return a("div",{key:t.language,staticClass:"mt-2 mr-2",staticStyle:{display:"block"}},[0==s?a("span",{staticClass:"light-bold"},[e._v(" "+e._s(e.$t("profile.common.alsoSpeaks"))+" -- ")]):e._e(),a("span",[e._v(" "+e._s(e.$t("localeCodes."+t.language))+" ")]),e._l(5,(function(s,r){return a("span",{key:r,staticClass:"level",class:e.languageLevelBars(t,r)})}))],2)}))],2)])]),a("div",{staticClass:"mt-3",domProps:{innerHTML:e._s(this.viewingUserData.profileBio)}})])])],1)],1)],1)]),a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"mb-3"},[e._v(e._s(e.teacherProfileText.lessonPlans))]),e._l(e.packages,(function(t){return a("div",{key:t._id},[t.isOffering?a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("div",{staticClass:"card-body price-card",on:{click:function(a){e.selectedPlan=t.packageType,e.openModal("price-modal")}}},[a("h5",{staticClass:"text-muted font-weight-light text-capitalize"},[e._v(" "+e._s(e.teacherProfileText.lessonTypes[t.packageType+"Alt"])+" ")]),a("p",[e._v(" "+e._s(e.formatString(t.packageType,["light","moderate","mainichi"],[e.teacherProfileText.lessonTypes.lightDesc,e.teacherProfileText.lessonTypes.moderateDesc,e.teacherProfileText.lessonTypes.mainichiDesc]))+" ")]),a("span",{staticClass:"badge badge-pill badge-primary manabu-blue",staticStyle:{"font-size":"0.9rem"}},[e._v("~"+e._s(e.convertMoney(t.packageDurations[0]/60*e.viewingUserData.teacherData.hourlyRate.amount*t.lessonAmount,t.priceDetails.currency,e.myUserData.settings.currency,!1,e.exchangeRates).toLocaleString())+"+ "+e._s(e.myUserData.settings.currency))])])]):e._e()])}))],2)]),a("div",{attrs:{id:"calendar-wrapper"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCalendar,expression:"showCalendar"}],staticClass:"card profile-card mb-3 shadow border-0"},[a("div",{staticClass:"card-body"},[a("view-calendar",{attrs:{hostedByProp:e.viewingUserData._id,id:"view-calendar"}})],1)])])]),a("b-col",{staticClass:"button-wrapper",attrs:{lg:"3"}},[a("div",{staticClass:"sticky-top"},[a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("h5",{staticClass:"font-weight-light mt-3 mx-3"},[e._v(" "+e._s(e.$t("profile.teacher.hourlyRate",{rate:e.teacherRate,currency:e.myUserData.settings.currency}))+" ")]),a("b-button",{staticClass:"mx-3 my-3 manabu-blue",attrs:{variant:"dark"},on:{click:function(t){return e.openModal("price-modal")}}},[e._v(e._s(e.teacherProfileText.bookNow)+" ")])],1),a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("b-button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#calendar-wrapper",expression:"'#calendar-wrapper'"}],staticClass:"mx-3 my-3",attrs:{variant:"dark"},on:{click:function(t){e.showCalendar=!e.showCalendar}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.showCalendar,expression:"!showCalendar"}]},[e._v(e._s(e.$t("profile.common.viewCalendar")))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showCalendar,expression:"showCalendar"}]},[e._v(e._s(e.$t("profile.common.hideCalendar")))])])],1)])]),a("b-col",{attrs:{lg:"2"}})],1)],1)],1)},c=[],l=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("45fc"),a("159b"),a("f459")),u=a("90a7"),d=a("42f3"),p=a("a165"),h=a("ad11"),f=a("354a"),g=a("bc3a"),m=a.n(g),v=a("88b4"),b=a.n(v),y=a("e981"),w=a.n(y),D={name:"TeacherProfile",computed:{isLoggedIn:{get:function(){return this.$store.getters.isLoggedIn},set:function(e){return e}},priceModalText:{get:function(){return this.$t("modal.priceModalText")}},teacherProfileText:{get:function(){return this.$t("profile.teacher")}},teacherTypes:{get:function(){return["".concat(this.teacherProfileText.proTeacher," --"),"".concat(this.teacherProfileText.commTeacher," --")]}},teacherRate:{get:function(){return Object(f["a"])(this.viewingUserData.teacherData.hourlyRate.amount,this.viewingUserData.teacherData.hourlyRate.currency,this.myUserData.settings.currency,!1,this.exchangeRates)}},teacherSince:{get:function(){return this.$t("profile.teacher.manabuVerified",{date:Object(h["a"])(this.viewingUserData.teacherData.dateApproved,"MMMM YYYY")})}},optionsSubscription:{get:function(){return[{text:this.$t("modal.yes"),value:"yes"},{text:this.$t("modal.no"),value:"no"}]}},teachingLanguages:{get:function(){return this.viewingUserData.teacherData.teachingLanguages}},otherLanguages:{get:function(){return this.viewingUserData.teacherData.alsoSpeaks}},optionsPlan:{get:function(){var e=this,t=[];return this.packages.forEach((function(a){if(a.isOffering){a.packageDurations.sort((function(e,t){return e-t}));var s=e.$t("profile.teacher.lessonTypes.".concat(a.packageType),{amount:a.lessonAmount});t.push({text:s,value:a.packageType})}})),t}},optionsDuration:{get:function(){var e=this,t=this.packages.find((function(t){return t.packageType==e.selectedPlan})),a=[];return t.packageDurations.forEach((function(t){a.push({text:e.$t("profile.teacher.lessonDuration",{duration:t}),value:t})})),this.selectedDuration=t.packageDurations[0],this.selectedPackageData=t,a}},optionsLanguage:{get:function(){var e=this,t=[];return this.teachingLanguages.forEach((function(a){t.push({text:e.$t("localeCodes.".concat(a.language)),value:a.language})})),t}}},data:function(){return{encryptedStorage:new b.a(w.a),isApproved:!1,host:"/api",showCalendar:!1,selectedPlan:"",selectedDuration:"",selectedLanguage:"",selectedSubscription:"no",selectedPackageData:this.packages[0]}},components:{ViewCalendar:u["default"]},props:{viewingUserData:Object,myUserData:Object,exchangeRates:Object,packages:Array},methods:{onConfirm:function(){var e=this.myUserData,t={hostedBy:this.viewingUserData._id,reservedBy:this.myUserData._id,selectedPlan:this.selectedPlan,selectedDuration:this.selectedDuration,selectedLanguage:this.selectedLanguage,selectedSubscription:this.selectedSubscription,selectedPackageId:this.selectedPackageData._id};try{this.encryptedStorage.set("storedTransaction",JSON.stringify(t))}catch(a){console.log(a)}this.isLoggedIn?this.$router.push({name:"Payment",params:{transactionData:t,myUserData:e}}):this.$router.push({name:"Sign Up",query:{hostedBy:t.hostedBy}})},openModal:function(e){this.$bvModal.show(e)},formatDate:h["a"],imageSourceEdit:l["a"],languageLevelBars:d["a"],formatString:p["a"],approveTeacher:function(e){var t=this;m.a.put("".concat(this.host,"/user/").concat(e,"/updateProfile"),{role:"teacher"}).then((function(a){200==a.status&&m.a.put("".concat(t.host,"/teacher/").concat(e,"/updateProfile"),{isApproved:!0,dateApproved:new Date}).then((function(e){200==e.status&&(t.isApproved=!0)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},convertMoney:f["a"],filterDuplicates:function(e,t){return e.filter((function(e){return t.some((function(t){return t.language!=e.language&&t.level!=e.level}))}))}},mounted:function(){this.selectedPlan=this.optionsPlan[0].value,this.selectedLanguage=this.optionsLanguage[0].value,this.selectedDuration=this.optionsDuration[0].value}},_=D,x=(a("bbd8"),a("2877")),C=Object(x["a"])(_,o,c,!1,null,null,null),k=C.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"student-profile"},[a("b-row",[a("b-col"),a("b-col",{staticStyle:{padding:"0 0 0 0 !important"},attrs:{md:"5"}},[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"embed-responsive-item",attrs:{src:"https://www.youtube.com/embed/NpEaa2P7qZI",allowfullscreen:""}})]),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v("Card title")]),a("p",{staticClass:"card-text"},[e._v("This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.")]),a("p",{staticClass:"card-text"},[a("small",{staticClass:"text-muted"},[e._v("Last updated 3 mins ago")])])])])]),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"card profile-card mb-3"},[a("div",{staticClass:"card-body"},[e._v(" Pricing goes here ")])])]),a("b-col")],1)],1)},T=[],P={name:"StudentProfile",data:function(){return{}},props:{viewingUserData:Object,myUserData:Object},methods:{}},S=P,L=(a("2ffc"),Object(x["a"])(S,U,T,!1,null,null,null)),$=L.exports,O=a("54aa");function R(e){return M.apply(this,arguments)}function M(){return M=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/transaction/package/".concat(t),{headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){throw e}));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}var A=R,j=a("07a4"),B=a("3656"),E={name:"UserProfile",created:function(){this.$emit("update:layout",i["a"])},components:{TeacherProfile:k,StudentProfile:$},computed:{storeUserData:{get:function(){return j["a"].getters.userData},set:function(e){return e}}},data:function(){return{myUserData:null,viewingUserData:null,packages:null,loading:!0}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(O["a"])(e.$route.params.uId);case 3:return e.viewingUserData=t.sent,e.myUserData=e.storeUserData,t.next=7,A(e.$route.params.uId);case 7:return e.packages=t.sent,t.next=10,Object(B["a"])();case 10:e.exchangeRates=t.sent,e.loading=!1,t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),e.$router.push("/404").catch((function(e){}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},methods:{fetchExchangeRates:B["a"],fetchPackageData:A,fetchUserData:O["a"],imageSourceEdit:l["a"],languageLevelBars:d["a"],formatBio:function(e){return e||"This user has not written a profile yet."}}},N=E,z=(a("16c0"),Object(x["a"])(N,s,r,!1,null,null,null));t["default"]=z.exports},a165:function(e,t,a){"use strict";a("c975");var s=function(e,t,a){var s=t.indexOf(e);if(-1!=s)return a[s]};t["a"]=s},a1f3:function(e,t,a){},bbd8:function(e,t,a){"use strict";a("6577")},c975:function(e,t,a){"use strict";var s=a("23e7"),r=a("4d64").indexOf,n=a("a640"),i=a("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=n("indexOf"),u=i("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},d79d:function(e,t,a){
/*!
 * money.js / fx() v0.2
 * Copyright 2014 Open Exchange Rates
 *
 * JavaScript library for realtime currency conversion and exchange rate calculation.
 *
 * Freely distributable under the MIT license.
 * Portions of money.js are inspired by or borrowed from underscore.js
 *
 * For details, examples and documentation:
 * http://openexchangerates.github.io/money.js/
 */
(function(a,s){var r=function(e){return new c(e)};r.version="0.2";var n=a.fxSetup||{rates:{},base:""};r.rates=n.rates,r.base=n.base,r.settings={from:n.from||r.base,to:n.to||r.base};var i=r.convert=function(e,t){if("object"===typeof e&&e.length){for(var a=0;a<e.length;a++)e[a]=i(e[a],t);return e}return t=t||{},t.from||(t.from=r.settings.from),t.to||(t.to=r.settings.to),e*o(t.to,t.from)},o=function(e,t){var a=r.rates;if(a[r.base]=1,!a[e]||!a[t])throw"fx error";return t===r.base?a[e]:e===r.base?1/a[t]:a[e]*(1/a[t])},c=function(e){"string"===typeof e?(this._v=parseFloat(e.replace(/[^0-9-.]/g,"")),this._fx=e.replace(/([^A-Za-z])/g,"")):this._v=e},l=r.prototype=c.prototype;l.convert=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this._v),i.apply(r,e)},l.from=function(e){var t=r(i(this._v,{from:e,to:r.base}));return t._fx=r.base,t},l.to=function(e){return i(this._v,{from:this._fx?this._fx:r.settings.from,to:e})},e.exports&&(t=e.exports=r),t.fx=r})(this)}}]);
//# sourceMappingURL=chunk-8b59a3fe.dbe4958e.js.map