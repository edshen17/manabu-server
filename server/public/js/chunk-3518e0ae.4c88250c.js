(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3518e0ae"],{3843:function(e,t,n){},"3ca3":function(e,t,n){"use strict";var a=n("6547").charAt,s=n("69f3"),r=n("7dd0"),i="String Iterator",o=s.set,c=s.getterFor(i);r(String,"String",(function(e){o(this,{type:i,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,s=t.index;return s>=n.length?{value:void 0,done:!0}:(e=a(n,s),t.index+=e.length,{value:e,done:!1})}))},"4df4":function(e,t,n){"use strict";var a=n("0366"),s=n("7b0b"),r=n("9bdd"),i=n("e95a"),o=n("50c4"),c=n("8418"),d=n("35a1");e.exports=function(e){var t,n,l,u,h,f,v=s(e),m="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,y=void 0!==g,S=d(v),w=0;if(y&&(g=a(g,p>2?arguments[2]:void 0,2)),void 0==S||m==Array&&i(S))for(t=o(v.length),n=new m(t);t>w;w++)f=y?g(v[w],w):v[w],c(n,w,f);else for(u=S.call(v),h=u.next,n=new m;!(l=h.call(u)).done;w++)f=y?r(u,g,[l.value,w],!0):l.value,c(n,w,f);return n.length=w,n}},"4ec9":function(e,t,n){"use strict";var a=n("6d61"),s=n("6566");e.exports=a("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(e,t,n){"use strict";var a=n("9bf2").f,s=n("7c73"),r=n("e2cc"),i=n("0366"),o=n("19aa"),c=n("2266"),d=n("7dd0"),l=n("2626"),u=n("83ab"),h=n("f183").fastKey,f=n("69f3"),v=f.set,m=f.getterFor;e.exports={getConstructor:function(e,t,n,d){var l=e((function(e,a){o(e,l,t),v(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),u||(e.size=0),void 0!=a&&c(a,e[d],{that:e,AS_ENTRIES:n})})),f=m(t),p=function(e,t,n){var a,s,r=f(e),i=g(e,t);return i?i.value=n:(r.last=i={index:s=h(t,!0),key:t,value:n,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=i),a&&(a.next=i),u?r.size++:e.size++,"F"!==s&&(r.index[s]=i)),e},g=function(e,t){var n,a=f(e),s=h(t);if("F"!==s)return a.index[s];for(n=a.first;n;n=n.next)if(n.key==t)return n};return r(l.prototype,{clear:function(){var e=this,t=f(e),n=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;t.first=t.last=void 0,u?t.size=0:e.size=0},delete:function(e){var t=this,n=f(t),a=g(t,e);if(a){var s=a.next,r=a.previous;delete n.index[a.index],a.removed=!0,r&&(r.next=s),s&&(s.previous=r),n.first==a&&(n.first=s),n.last==a&&(n.last=r),u?n.size--:t.size--}return!!a},forEach:function(e){var t,n=f(this),a=i(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),r(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return p(this,0===e?0:e,t)}}:{add:function(e){return p(this,e=0===e?0:e,e)}}),u&&a(l.prototype,"size",{get:function(){return f(this).size}}),l},setStrong:function(e,t,n){var a=t+" Iterator",s=m(t),r=m(a);d(e,t,(function(e,t){v(this,{type:a,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},"6d61":function(e,t,n){"use strict";var a=n("23e7"),s=n("da84"),r=n("94ca"),i=n("6eeb"),o=n("f183"),c=n("2266"),d=n("19aa"),l=n("861d"),u=n("d039"),h=n("1c7e"),f=n("d44e"),v=n("7156");e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),p=-1!==e.indexOf("Weak"),g=m?"set":"add",y=s[e],S=y&&y.prototype,w=y,b={},B=function(e){var t=S[e];i(S,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(p&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return p&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(p&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(r(e,"function"!=typeof y||!(p||S.forEach&&!u((function(){(new y).entries().next()})))))w=n.getConstructor(t,e,m,g),o.REQUIRED=!0;else if(r(e,!0)){var C=new w,L=C[g](p?{}:-0,1)!=C,x=u((function(){C.has(1)})),E=h((function(e){new y(e)})),_=!p&&u((function(){var e=new y,t=5;while(t--)e[g](t,t);return!e.has(-0)}));E||(w=t((function(t,n){d(t,w,e);var a=v(new y,t,w);return void 0!=n&&c(n,a[g],{that:a,AS_ENTRIES:m}),a})),w.prototype=S,S.constructor=w),(x||_)&&(B("delete"),B("has"),m&&B("get")),(_||L)&&B(g),p&&S.clear&&delete S.clear}return b[e]=w,a({global:!0,forced:w!=y},b),f(w,e),p||n.setStrong(w,e,m),w}},"90a7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ViewCalendar"},[n("b-modal",{attrs:{id:"complete-modal",title:"Success!"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.reserveErr=!1,e.$bvModal.hide("complete-modal")}}},[e._v(" OK ")])]},proxy:!0}])},[n("p",{directives:[{name:"show",rawName:"v-show",value:!e.reserveErr,expression:"!reserveErr"}],staticClass:"my-4"},[e._v(" Your reservation has been made and is pending confirmation. You can reschedule appointments before they begin and can cancel them anytime before they start. ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.reserveErr,expression:"reserveErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. Please try again. ")])]),n("b-modal",{attrs:{id:"update-modal"},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" "+e._s(e.modalTitleText)+" ")]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr,expression:"!updateErr"}],on:{click:function(t){return e.resetOnCancel("update-modal")}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.isCancelling,expression:"!isCancelling"}]},[e._v(" Hide ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.isCancelling,expression:"isCancelling"}]},[e._v(" No ")])]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.isCancelling,expression:"!updateErr && !isCancelling"}],attrs:{variant:"danger"},on:{click:function(t){e.isCancelling=!0,e.cancelAppointment(e.cancelStartTime)}}},[e._v(" Cancel ")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&e.isCancelling,expression:"!updateErr && isCancelling"}],attrs:{variant:"danger"},on:{click:function(t){e.isCancellingConfirmation=!0,e.cancelAppointment(e.cancelStartTime)}}},[e._v(" Yes ")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.updateErr,expression:"updateErr"}],attrs:{variant:"primary"},on:{click:function(t){e.updateErr=!1,e.$bvModal.hide("update-modal")}}},[e._v(" OK ")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.isCancelling&&e.rescheduleSlotLimit>0,expression:"!updateErr && !isCancelling && rescheduleSlotLimit > 0"}],attrs:{variant:"primary"},on:{click:e.prepareReschedule}},[e._v(" Reschedule ")])]},proxy:!0}])},[e.selectedHostedBy?n("div",{staticClass:"profile-popup"},[n("img",{staticClass:"rounded-circle center-image no-cursor",attrs:{alt:"100x100",src:e.imageSourceEdit(e.selectedHostedBy.profileImage)}}),n("b-link",{staticClass:"profile-link",attrs:{to:"/user/"+e.selectedHostedBy._id}},[n("h5",{staticClass:"text-center mb-2 mt-2"},[e._v(e._s(e.selectedHostedBy.name))])]),n("div",{staticClass:"text-center"},[e._l(e.selectedHostedBy.languages,(function(t){return n("div",{key:t.language,staticClass:"mx-1",staticStyle:{display:"inline"}},[e._v(" "+e._s(e.languageCodeToText(t.language))+" "),e._l(5,(function(a,s){return n("span",{key:s,staticClass:"level",class:e.languageLevelBars(t,s)})}))],2)})),e.selectedEventData?n("span",{staticClass:"mt-2",staticStyle:{display:"block"}},[n("b",[e._v("Lesson time")]),e._v(": "+e._s(e.formatDate(e.selectedEventData.from,"MMM DD @ h:mma"))+"-"+e._s(e.formatDate(e.selectedEventData.to,"h:mma"))+" ("+e._s(e.userTimeZone)+") ")]):e._e(),e.selectedEventData&&e.selectedEventData.locationData?n("span",[n("b",[e._v("Communication Tool")]),e._v(": "+e._s(e.selectedEventData.locationData.method)+" (id: "+e._s(e.selectedEventData.locationData.hostedByMethodId)+") ")]):e._e()],2)],1):e._e(),n("p",{directives:[{name:"show",rawName:"v-show",value:e.updateErr,expression:"updateErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. If you are rescheduling, make sure you do it before the lesson starts. ")])]),n("b-modal",{attrs:{id:"reschedule-modal",title:"Reschedule confirmation","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],on:{click:function(t){return e.resetOnCancel("reschedule-modal")}}},[e._v(" Exit ")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],attrs:{variant:"info"},on:{click:function(t){return e.$bvModal.hide("reschedule-modal")}}},[e._v(" No ")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.rescheduleErr,expression:"rescheduleErr"}],attrs:{variant:"primary"},on:{click:function(t){e.rescheduleErr=!1,e.$bvModal.hide("reschedule-modal")}}},[e._v(" OK ")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],attrs:{variant:"primary"},on:{click:e.rescheduleAppointment}},[e._v(" Yes ")])]},proxy:!0}])},[n("p",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],staticClass:"my-4"},[e._v(" Are you sure you want to reschedule the appointment to "+e._s(e.getRescheduleTime())+"? ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.rescheduleErr,expression:"rescheduleErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. If you are rescheduling, make sure you do it before the lesson starts. ")])]),e.isLoaded?n("div",[e.isRescheduling?n("div",[n("h4",{staticClass:"text-center slots-left"},[e._v("Click a slot to reschedule")])]):n("div",[e.nonReservableCalendar?e._e():n("h4",{staticClass:"text-center slots-left"},[e._v(" Remaining timeslots: "+e._s(e.reservationSlotLimit)+". Reschedules: "+e._s(e.rescheduleSlotLimit)+". Appointments left until free lesson: "+e._s(e.reservationLength/5-e.minuteBank/5)+" ")])]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.reservedBy,expression:"reservedBy"}],staticClass:"add-manual",class:{"enabled-button":e.reservationSlotLimit<=e.reservationSlotLimit&&e.currentlySelected.length>0},attrs:{disabled:e.reservationSlotLimit==e.reservationSlotLimit&&0==e.currentlySelected.length},on:{click:function(t){return e.createAppointments()}}},[n("i",{staticClass:"fas fa-arrow-right"})]),n("kalendar",{ref:"kalendar",attrs:{configuration:e.calendar_settings,events:e.events},on:{"update:events":function(t){e.events=t}},scopedSlots:e._u([{key:"created-card",fn:function(t){var a=t.event_information;return n("div",{staticClass:"details-card",class:{"booked-by-self":"confirmed"==a.data.status&&a.data.reservedBy==e.reservedBy&&!e.onEventClassBind(a.data.from,e.prevRescheduledLessons)&&!e.onEventClassBind(a.data.from,e.sessionCancelledLessons),"booked-by-other":a.data.reservedBy!=e.reservedBy&&""!=a.data.reservedBy&&"student issue"!=a.data.cancellationReason&&"student cancel"!=a.data.cancellationReason,pending:"pending"==a.data.status&&a.data.reservedBy==e.reservedBy&&!e.onEventClassBind(a.data.from,e.prevRescheduledLessons)||e.onEventClassBind(a.data.from,e.sessionPendingLessons)&&!e.onEventClassBind(a.data.from,e.sessionCancelledLessons)||e.onEventClassBind(a.data.from,e.sessionRescheduledLessons),"on-select":e.onEventClassBind(a.data.from,e.currentlySelected),cancelled:"cancelled"==a.data.status&&a.data.reservedBy==e.reservedBy||e.onEventClassBind(a.data.from,e.sessionCancelledLessons),restricted:(new Date>new Date(a.data.from)||e.isOnSameDay(new Date,new Date(a.data.from)))&&(e.reservedBy!=a.data.reservedBy||""==e.reservedBy)},attrs:{id:a.data.from},on:{click:function(t){return e.onClick(a.data)}}},[n("span",{staticClass:"time appointment-title",staticStyle:{"text-align":"left"}},[e._v(e._s(e.parseISOString(a.start_time))+" - "+e._s(e.parseISOString(a.end_time))+" ")])])}}],null,!1,1719083677)})],1):n("div",{staticClass:"d-flex justify-content-center my-4"},[n("b-spinner",{attrs:{label:"Loading..."}})],1)],1)},s=[];n("99af"),n("4de4"),n("7db0"),n("c740"),n("d81d"),n("4ec9"),n("d3b7"),n("ac1f"),n("3ca3"),n("1276"),n("ddb0");function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e){if(Array.isArray(e))return r(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("fb6a"),n("b0c0"),n("25f0");function c(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return i(e)||o(e)||c(e)||d()}n("96cf");var u=n("1da1"),h=n("5c28"),f=n("5a0c"),v=n.n(f),m=n("0ecf"),p=n.n(m),g=n("1953"),y=n.n(g),S=n("e418"),w=n.n(S),b=n("bc3a"),B=n.n(b),C=n("e8c2"),L=n("42f3"),x=n("5278"),E=n("54aa"),_=n("f459"),R=n("07a4"),k=n("ad11");v.a.extend(w.a),v.a.extend(p.a),v.a.extend(y.a);var D={name:"ViewCalendar",components:{Kalendar:h["a"]},created:function(){this.$emit("update:layout",C["a"])},props:{hostedByProp:String},computed:{storeUserData:{get:function(){return R["a"].getters.userData},set:function(e){return e}},isMobile:{get:function(){return R["a"].getters.isMobile}}},watch:{storeUserData:function(e){this.user=e}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isMobile&&(e.calendar_settings.view_type="day"),e.user=e.storeUserData,e.hostedBy=e.$route.params.hostedBy||e.hostedByProp,e.$route.params.hostedBy&&e.$route.params.packageTransactionId?B.a.get("".concat(e.host,"/transaction/packageTransaction/").concat(e.$route.params.packageTransactionId)).then((function(t){200==t.status&&t.data.reservedBy==e.user._id&&(e.reservedBy=t.data.reservedBy,e.reservationSlotLimit=t.data.remainingAppointments,e.rescheduleSlotLimit=t.data.remainingReschedules,e.reservationLength=t.data.reservationLength,B.a.get("".concat(e.host,"/transaction/minuteBank/").concat(e.hostedBy,"/").concat(e.reservedBy)).then((function(t){200==t.status&&(e.minuteBank=t.data.minuteBank,e.getScheduleData())})))})).catch((function(e){console.log(e)})):!e.$route.params.hostedBy&&!e.hostedByProp||e.$route.params.packageTransactionId||(e.reservedBy="",e.reservationSlotLimit=0,e.rescheduleSlotLimit=0,e.reservationLength=60,e.nonReservableCalendar=!0,e.getScheduleData());case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{userTimeZone:v.a.tz.guess(),user:null,host:"/api",reservedBy:"",hostedBy:"",reservationLength:null,rescheduleSlotLimit:null,calendar_settings:{style:"material_design",view_type:"week",cell_height:10,scrollToNow:!1,start_day:(new Date).toISOString(),read_only:!0,day_starts_at:0,day_ends_at:24},nonReservableCalendar:!1,isLoaded:!1,currentlySelected:[],events:[],reservationSlotLimit:null,minuteBank:null,rescheduleErr:!1,reserveErr:!1,updateErr:!1,appointments:[],sessionPendingLessons:[],sessionCancelledLessons:[],sessionRescheduledLessons:[],prevRescheduledLessons:[],originalReschedulingLesson:{},updatedReschedulingLesson:{},isCancelling:!1,isCancellingConfirmation:!1,isRescheduling:!1,modalTitleText:"Appointment details",selectedHostedBy:null,selectedEventData:null}},methods:{formatDate:k["a"],imageSourceEdit:_["a"],fetchUserData:E["a"],deepCopy:function(e){return JSON.parse(JSON.stringify(e))},formatAMPM:function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"pm":"am";t%=12,t=t||12,n=n<10?"0"+n:n;var s=t+":"+n+a;return s},getRescheduleTime:function(){if(null!=this.selectedEventData){var e=v()(this.selectedEventData.from).add(this.reservationLength,"minutes").toISOString();return"".concat(this.formatAMPM(new Date(this.selectedEventData.from))," - ").concat(this.formatAMPM(new Date(e)))}},getAppointmentTime:function(){var e=this;if(null!=this.selectedEventData){var t=this.appointments.find((function(t){return t.from==e.selectedEventData.from}));if(void 0!=t)return"".concat(this.formatAMPM(new Date(t.from))," - ").concat(this.formatAMPM(new Date(t.to)))}},rescheduleAppointment:function(){var e=this,t=this.originalReschedulingLesson._id;B.a.put("".concat(this.host,"/schedule/appointment/").concat(t),{status:"pending",from:this.updatedReschedulingLesson.from,to:this.updatedReschedulingLesson.to}).then((function(t){if(200==t.status){e.rescheduleSlotLimit--,B.a.put("".concat(e.host,"/transaction/packageTransaction/").concat(e.$route.params.packageTransactionId),{remainingReschedules:e.rescheduleSlotLimit}).catch((function(e){console.log(e)})),e.$bvModal.hide("reschedule-modal"),e.prevRescheduledLessons.push(e.deepCopy(e.originalReschedulingLesson)),e.sessionRescheduledLessons.push(e.deepCopy(e.updatedReschedulingLesson));var n=e.appointments.findIndex((function(t){return t.from==e.originalReschedulingLesson.from}));e.appointments[n]=e.deepCopy(e.updatedReschedulingLesson),e.sessionPendingLessons=e.sessionPendingLessons.filter((function(t){return t.from!=e.originalReschedulingLesson.from}));for(var a=function(t){var n=e.events.find((function(n){return void 0!=n.from&&n.data.from==v()(e.originalReschedulingLesson.from).add(30*t,"minutes").toISOString()}));n&&(n.data.reservedBy="",n.data.status="")},s=0;s<=e.reservationLength/30-1;s++)a(s);for(var r=function(n){var a=e.events.find((function(t){return void 0!=t.from&&t.data.from==v()(e.updatedReschedulingLesson.from).add(30*n,"minutes").toISOString()}));a&&(a.data.reservedBy=t.data.reservedBy,a.data.status=t.data.status)},i=0;i<=e.reservationLength/30-1;i++)r(i)}e.resetOnCancel("update-modal")})).catch((function(e){console.log(e)}))},isOnSameDay:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},prepareReschedule:function(){var e=this,t=this.appointments.find((function(t){return t.from==e.selectedEventData.from})),n=new Date(t.from),a=new Date;this.isOnSameDay(n,a)?this.updateErr=!0:(this.originalReschedulingLesson=this.deepCopy(t),this.isRescheduling=!0,this.$bvModal.hide("update-modal"))},resetOnCancel:function(e){this.isRescheduling=!1,this.isCancelling=!1,this.isCancellingConfirmation=!1,this.originalReschedulingLesson={},this.updatedReschedulingLesson={},this.modalTitleText="Appointment details",this.$bvModal.hide(e)},languageCodeToText:x["a"],languageLevelBars:L["a"],onClick:function(e){var t=this,n=e.from,a=v()(n).add(this.reservationLength,"minutes").toISOString(),s=new Date>new Date(n),r=this.isOnSameDay(new Date(n),new Date),i=this.currentlySelected.findIndex((function(e){return e.from==n}));this.selectedEventData=this.deepCopy(e);var o=this.reservationLength/30-1,c=this.events.find((function(e){return e.data.from==v()(n).add(30*o,"minutes").toISOString()}));if(-1!=i)return this.reservationSlotLimit+=1,void(this.currentlySelected=this.currentlySelected.filter((function(e,t){return t!==i})));if(!s&&void 0!=c){for(var d=!0,u=0!=this.appointments.filter((function(e){return e.from==n&&e.reservedBy==t.reservedBy})).length,h=function(e){var a=v()(n).add(30*e,"minutes").toISOString(),s=t.events.find((function(e){return e.from==a})),r=void 0;if(void 0!=s){var i="cancelled"==s.data.status&&s.data.reservedBy==t.reservedBy,o=("pending"==s.data.status||"confirmed"==s.data.status)&&s.data.reservedBy==t.reservedBy,c=""==s.data.status||"cancelled"==s.data.status&&"schedule change"!=s.data.cancellationReason&&s.data.reservedBy!=t.reservedBy&&!i;r=c||o,t.isRescheduling?d=""==s.data.status||"cancelled"==s.data.status&&"schedule change"!=s.data.cancellationReason&&s.data.reservedBy!=t.reservedBy||o:(d=d&&!o&&c&&r,o&&u&&(t.$bvModal.show("update-modal"),t.cancelStartTime=n))}},f=0;f<=o;f++)h(f);if(!d||this.isRescheduling||0==this.reservationSlotLimit||r){if(d&&this.isRescheduling){for(var m,p=v()(n).isBetween(v()(this.originalReschedulingLesson.from),v()(this.originalReschedulingLesson.to))||v()(a).isBetween(v()(this.originalReschedulingLesson.from),v()(this.originalReschedulingLesson.to)),g=0;g<this.appointments.length;g++)m=m||v()(n).isBetween(v()(this.appointments[g].from),v()(this.appointments[g].to))||v()(a).isBetween(v()(this.appointments[g].from),v()(this.appointments[g].to));m&&!p||-1!=this.appointments.findIndex((function(e){return e.from==n}))||(this.$bvModal.show("reschedule-modal"),this.updatedReschedulingLesson=this.deepCopy(this.originalReschedulingLesson),this.updatedReschedulingLesson.from=n,this.updatedReschedulingLesson.to=a)}}else{var y=l(this.currentlySelected);if(0==this.currentlySelected.length)this.reservationSlotLimit-=1,this.currentlySelected.push(this.appointmentFactory(this.hostedBy,this.reservedBy,this.$route.params.packageTransactionId,n,a));else for(var S=!1,w=0;w<y.length;w++)S=S||v()(n).isBetween(v()(this.currentlySelected[w].from),v()(this.currentlySelected[w].to))||v()(a).isBetween(v()(this.currentlySelected[w].from),v()(this.currentlySelected[w].to)),S||w!=this.currentlySelected.length-1||(this.currentlySelected.push(this.appointmentFactory(this.hostedBy,this.reservedBy,this.$route.params.packageTransactionId,n,a)),this.reservationSlotLimit-=1)}}},onEventClassBind:function(e,t){for(var n=!1,a=function(a){var s=void 0;s=0==a?v()(e).toISOString():v()(e).subtract(30*a,"minutes").toISOString(),n=n||0!=t.filter((function(t){return t.from==e||t.from==s})).length},s=0;s<=this.reservationLength/30-1;s++)a(s);return n},cancelAppointment:function(e){var t=this;this.modalTitleText="Are you sure you want to cancel the appointment?";var n=this.appointments.find((function(t){return t.from==e}))._id;this.isCancelling&&this.isCancellingConfirmation&&B.a.put("".concat(this.host,"/schedule/appointment/").concat(n),{status:"cancelled",cancellationReason:"student cancel"}).then((function(n){if(200==n.status){t.$bvModal.hide("update-modal"),t.appointments=t.appointments.filter((function(t){return t.from!=e})),t.sessionPendingLessons=t.sessionPendingLessons.filter((function(t){return t.from!=e})),t.sessionCancelledLessons.push(n.data),t.resetOnCancel();for(var a=function(a){var s=t.events.find((function(t){return void 0!=t.from&&t.data.from==v()(e).add(30*a,"minutes").toISOString()}));s&&(s.data.cancellationReason=n.data.cancellationReason,s.data.status=n.data.status)},s=0;s<=t.reservationLength/30-1;s++)a(s)}})).catch((function(e){console.log(e)}))},createAppointments:function(){for(var e=this,t=function(t){var n=e.currentlySelected[t].from,a=e.events.find((function(e){return void 0!=e.from&&e.data.from==n})).data.from;B.a.post("".concat(e.host,"/schedule/appointment"),e.currentlySelected[t]).then((function(t){if(200==t.status){if(e.$bvModal.show("complete-modal"),e.appointments.push(t.data),a)for(var n=function(n){var s=e.events.find((function(e){return void 0!=e.from&&e.data.from==v()(a).add(30*n,"minutes").toISOString()}));s&&(s.data.reservedBy=t.data.reservedBy,s.data.status=t.data.status)},s=0;s<=e.reservationLength/30-1;s++)n(s);B.a.put("".concat(e.host,"/transaction/packageTransaction/").concat(e.$route.params.packageTransactionId),{remainingAppointments:e.reservationSlotLimit}).then((function(t){var n;200==t.status&&((n=e.sessionPendingLessons).push.apply(n,l(e.currentlySelected)),e.currentlySelected=[])})).catch((function(e){console.log(e)}))}})).catch((function(t){e.reserveErr=!0}))},n=0;n<this.currentlySelected.length;n++)t(n)},getScheduleData:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=v()().subtract(1,"month"),a=v()().add(3,"month"),t.next=4,Object(E["a"])(e.hostedBy);case 4:e.selectedHostedBy=t.sent,B.a.get("".concat(e.host,"/schedule/").concat(e.hostedBy,"/availableTime/").concat(n.toISOString(),"/").concat(a.toISOString())).then((function(t){200==t.status&&B.a.get("".concat(e.host,"/schedule/").concat(e.hostedBy,"/appointment/").concat(n.toISOString(),"/").concat(a.toISOString())).then((function(n){if(200==n.status){for(var a=t.data.concat(n.data),s=0;s<a.length;s++)e.intervals(a[s]);e.appointments=n.data,e.isLoaded=!0}}))}));case 6:case"end":return t.stop()}}),t)})))()},appointmentFactory:function(e,t,n,a,s){var r={hostedBy:e,reservedBy:t,from:a,to:s,packageTransactionId:n};return r},removeSelection:function(e){this.currentlySelected=this.currentlySelected.filter((function(t){return t.from!=e}))},intervals:function(e){var t=this,n=v()(e.from).minute(30*Math.ceil(v()(e.from).minute()/30)),a=v()(e.to),s=e.reservedBy?e.reservedBy:"",r=e.hostedBy?e.hostedBy:"",i=e.status?e.status:"",o=[],c=v()(n);while(c<=a)o.push(c.toISOString()),c=c.add(30,"minutes");for(var d=0;d<o.length;d++)d!=o.length-1&&function(){var n={from:o[d],to:o[d+1],data:{_id:e._id,from:o[d],to:o[d+1],reservedBy:s,hostedBy:r,status:i,cancellationReason:e.cancellationReason||"",packageTransactionData:e.packageTransactionData,locationData:e.locationData}},a=t.events.findIndex((function(e){e.data.from,n.from}));-1==a&&(t.events.push(n),t.events=l(new Map(t.events.map((function(e){return[e["from"],e]}))).values()))}()},parseISOString:function(e){var t=e.split("T");return t[1].substring(0,5)}}},I=D,O=(n("bdda"),n("2877")),T=Object(O["a"])(I,a,s,!1,null,null,null);t["default"]=T.exports},"9bdd":function(e,t,n){var a=n("825a"),s=n("2a62");e.exports=function(e,t,n,r){try{return r?t(a(n)[0],n[1]):t(n)}catch(i){throw s(e),i}}},a630:function(e,t,n){var a=n("23e7"),s=n("4df4"),r=n("1c7e"),i=!r((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:i},{from:s})},bb2f:function(e,t,n){var a=n("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bdda:function(e,t,n){"use strict";n("3843")},d28b:function(e,t,n){var a=n("746f");a("iterator")},e01a:function(e,t,n){"use strict";var a=n("23e7"),s=n("83ab"),r=n("da84"),i=n("5135"),o=n("861d"),c=n("9bf2").f,d=n("e893"),l=r.Symbol;if(s&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new l(e):void 0===e?l():l(e);return""===e&&(u[t]=!0),t};d(h,l);var f=h.prototype=l.prototype;f.constructor=h;var v=f.toString,m="Symbol(test)"==String(l("test")),p=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=v.call(e);if(i(u,e))return"";var n=m?t.slice(7,-1):t.replace(p,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:h})}},e418:function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,a,s){var r=n(e),i=n(t),o="("===(s=s||"()")[0],c=")"===s[1];return(o?this.isAfter(r,a):!this.isBefore(r,a))&&(c?this.isBefore(i,a):!this.isAfter(i,a))||(o?this.isBefore(r,a):!this.isAfter(r,a))&&(c?this.isAfter(i,a):!this.isBefore(i,a))}}}))},f183:function(e,t,n){var a=n("d012"),s=n("861d"),r=n("5135"),i=n("9bf2").f,o=n("90e3"),c=n("bb2f"),d=o("meta"),l=0,u=Object.isExtensible||function(){return!0},h=function(e){i(e,d,{value:{objectID:"O"+ ++l,weakData:{}}})},f=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,d)){if(!u(e))return"F";if(!t)return"E";h(e)}return e[d].objectID},v=function(e,t){if(!r(e,d)){if(!u(e))return!0;if(!t)return!1;h(e)}return e[d].weakData},m=function(e){return c&&p.REQUIRED&&u(e)&&!r(e,d)&&h(e),e},p=e.exports={REQUIRED:!1,fastKey:f,getWeakData:v,onFreeze:m};a[d]=!0}}]);
//# sourceMappingURL=chunk-3518e0ae.4c88250c.js.map