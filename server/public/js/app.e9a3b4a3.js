(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},i=[];function r(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-0bbf23f2":"0d4ad0dd","chunk-2d0e9ae9":"f64ed4fb","chunk-2d21d447":"0017a9f0"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=s[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(u);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,a[1](l)}s[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"005e":function(e,t,a){"use strict";a("79f0")},"02ce":function(e,t,a){},"034f":function(e,t,a){"use strict";a("85ec")},"039a":function(e,t,a){"use strict";a("7174")},"16c0":function(e,t,a){"use strict";a("a1f3")},"2dad":function(e,t,a){},"2fe3":function(e,t,a){"use strict";a("02ce")},"2ffc":function(e,t,a){"use strict";a("8527")},3258:function(e,t,a){"use strict";a("460c")},3843:function(e,t,a){},"460c":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.layout,{tag:"component"},[a("link",{attrs:{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.2.0/css/all.css",integrity:"sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ",crossorigin:"anonymous"}}),a("router-view",{attrs:{layout:e.layout},on:{"update:layout":function(t){e.layout=t}}})],1)},i=[],r={name:"App",data:function(){return{layout:"div"}}},o=r,c=(a("034f"),a("2877")),l=Object(c["a"])(o,s,i,!1,null,null,null),u=l.exports,d=(a("96cf"),a("1da1")),h=a("bc3a"),p=a.n(h),m=a("8c4f"),f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Home"},[n("div",{attrs:{id:"parallax"}},[n("section",[n("div",{staticClass:"parallax-one"},[n("h2",[e._v("MANABU")]),n("h3",{staticClass:"mt-2"},[e._v("Learning your way")])])]),n("section",[n("div",{staticClass:"block"},[n("p",[n("span",{staticClass:"first-character sc"},[e._v("O")]),e._v("ur vision is to connect the world through personalized language learning. Above all, we value multicultural communication, friendship, and long-lasting relationships between students and teachers. We strive to teach with the best digital resources available and are commited to adjusting our curriculums to fit students' needs and goals. After all, we founded Manabu to make language learning fun and rewarding. ")]),n("p",{staticClass:"line-break margin-top-10"}),n("p",{staticClass:"margin-top-10"},[e._v(" Manabu is a technology-focused organization based in Singapore. We started from a small community of Japanese teachers and hope to build a global community of language learners. We believe that fluency can be achieved through intensive learning and everyday communication. This idea is reflected in our learning portal, as we have developed tools to aid Japanese learning: we provide shared lesson materials, in-depth data reporting on student progress, and extensive feedback to help students overcome their weaknesses. ")])])]),n("div",{staticClass:"choose-us"},[n("section",[n("h1",[e._v("Why choose us?")]),n("div",{staticClass:"block"},[n("p",[e._v(" At Manabu, we are confident in our ability to provide effective and customized lessons, regardless of student language level. Our digital resources - curated and carefully prepared by experts - have achieved great results in the past. ")])])])])]),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-6"},[n("div",{staticClass:"card mb-2"},[n("img",{staticClass:"card-img-top",attrs:{src:"https://static.wixstatic.com/media/0b4d3da40646462f99177b0d7db4697f.jpg/v1/fill/w_846,h_619,fp_0.50_0.50,q_85,usm_0.66_1.00_0.01/0b4d3da40646462f99177b0d7db4697f.webp",alt:"Card image cap"}}),n("div",{staticClass:"card-body bg-dark text-white"},[n("h5",{staticClass:"card-title"},[e._v("Progress with visuals and data")]),n("p",{staticClass:"card-text"},[e._v(" Your progress is hard to measure unless you take an exam. Your effort cannot be seen, the time you spent is not visible, but what if you could see everything? We will analyze your progress from many aspects and visualize your effort. As you progress the character will move forward on the progress bar. Completely record and analyze lesson progress and student growth. Since we are in charge of that part, we can concentrate on teaching, and it is possible to make a full-scale lesson plan using data etc. ")])])]),n("div",{staticClass:"card mb-4"},[n("img",{staticClass:"card-img-top",attrs:{src:"https://static.wixstatic.com/media/0b4d3da40646462f99177b0d7db4697f.jpg/v1/fill/w_846,h_613,fp_0.50_0.50,q_85,usm_0.66_1.00_0.01/0b4d3da40646462f99177b0d7db4697f.webp",alt:"Card image cap"}}),n("div",{staticClass:"card-body bg-dark text-white"},[n("h5",{staticClass:"card-title"},[e._v("Feature Subtitle")]),n("p",{staticClass:"card-text"},[e._v(" Achieve your goal with your teacher. We understand the need for goals. Reflect on your strengths, weaknesses, threats and opportunities. We know how to create effective goals. Define your goals clearly using SMART systems. Think of problems that might come up that would interfere. ")])])])]),n("div",{staticClass:"col-sm-6"},[n("div",{staticClass:"card mb-2"},[n("img",{staticClass:"card-img-top",attrs:{src:a("98a8"),alt:"Card image cap"}}),n("div",{staticClass:"card-body bg-dark text-white"},[n("h5",{staticClass:"card-title"},[e._v("Keep learning every day")]),n("p",{staticClass:"card-text"},[e._v(" Language learning is non stop. Everyday lessons are best for faster improvement, but of course you can create your own schedule and arrange the time of the lessons based on your preference. If you would like casual lessons such as one lesson a week, please let me know! We can figure it out too! ")])])]),n("div",{staticClass:"card mb-4"},[n("img",{staticClass:"card-img-top",attrs:{src:"https://static.wixstatic.com/media/b5d897a11e2d48479595d09c7cf15044.jpg/v1/fill/w_848,h_613,fp_0.50_0.50,q_85,usm_0.66_1.00_0.01/b5d897a11e2d48479595d09c7cf15044.webp",alt:"Card image cap"}}),n("div",{staticClass:"card-body bg-dark text-white"},[n("h5",{staticClass:"card-title"},[e._v(" Our technology improves the efficiency of your learnings ")]),n("p",{staticClass:"card-text"},[e._v(" We have structured lesson systems and study materials. We have chosen the most helpful apps and flashcard maker, and other writing, speaking and listening practice tools. You don't need to spend time on those uptight tasks, but instead, you can focus on memorizing, practicing, and performing! No worries, we will offer the environment and materials. ")])])])])])])])}],g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"LayoutDefault"},[a("div",[a("b-navbar",{staticClass:"navbar navbar-expand-lg navbar-light bg-light",attrs:{toggleable:"lg"}},[a("b-navbar-brand",[a("b-link",{staticClass:"navbar-brand d-lg-inline-block",attrs:{to:"/"}},[e._v(" MANABU ")])],1),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}]},[a("b-link",{staticClass:"nav-link menu-item",class:{active:"Teachers"==e.$route.name},attrs:{to:"/teachers"}},[e._v("Find a Teacher")])],1),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:"Dashboard"!=this.$route.name&&"Settings"!=this.$route.name,expression:"this.$route.name != 'Dashboard' && this.$route.name != 'Settings'"}]},[a("b-link",{staticClass:"nav-link menu-item",class:{active:"Apply"==e.$route.name},attrs:{to:"/apply"}},[e._v("Become a Teacher")])],1),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!this.isLoggedIn,expression:"!this.isLoggedIn"}]},[a("b-link",{staticClass:"nav-link menu-item",class:{active:"Log In"==e.$route.name},attrs:{to:"/login"}},[e._v("Log In")])],1),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!this.isLoggedIn,expression:"!this.isLoggedIn"}]},[a("b-link",{staticClass:"nav-link menu-item",class:{active:"Sign Up"==e.$route.name},attrs:{to:"/signup"}},[e._v("Sign Up")])],1),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:this.isLoggedIn,expression:"this.isLoggedIn"}]},[a("b-link",{staticClass:"nav-link menu-item",attrs:{to:"/logout"}},[e._v("Logout")])],1)],1)],1)],1)],1),a("main",{staticClass:"LayoutDefault_main"},[e._t("default")],2)])},y=[],b=a("2f62");n["default"].use(b["a"]);var w=new b["a"].Store({state:{user:{data:null,isLoggedIn:!1}},mutations:{setUserData:function(e,t){e.user.data=t},setLoggedIn:function(e,t){e.user.isLoggedIn=t}},getters:{userData:function(e){return e.user.data},isLoggedIn:function(e){return e.user.isLoggedIn}}}),C=w,_={name:"LayoutDefault",computed:{isLoggedIn:{get:function(){return C.getters.isLoggedIn},set:function(e){return e}}},watch:{isLoggedIn:function(e){this.isLoggedIn=e}}},k=_,x=(a("3258"),Object(c["a"])(k,g,y,!1,null,null,null)),D=x.exports,S={name:"Home",created:function(){this.$emit("update:layout",D)}},R=S,L=(a("8b71"),Object(c["a"])(R,f,v,!1,null,null,null)),B=L.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Signup"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-9 col-md-7 col-lg-5 mx-auto"},[a("div",{staticClass:"card card-signin my-5"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title text-center"},[e._v("Sign Up")]),a("form",{staticClass:"form-signin"},[a("div",{staticClass:"form-label-group"},[a("div",{staticClass:"form-label-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"name",staticClass:"form-control",attrs:{type:"name",id:"inputName",placeholder:"Name"},domProps:{value:e.name},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.signUp(t):null},input:function(t){t.target.composing||(e.name=t.target.value)}}}),a("label",{attrs:{for:"inputName"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address"},domProps:{value:e.email},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.signUp(t):null},input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("label",{attrs:{for:"inputEmail"}})]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",autocomplete:"on","aria-label":"Password","aria-describedby":"basic-addon2"},domProps:{value:e.password},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.signUp(t):null},input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("label",{attrs:{for:"inputPassword"}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.switchVisibility}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.showPassword,expression:"showPassword"}],staticClass:"fas fa-eye"}),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.showPassword,expression:"!showPassword"}],staticClass:"fas fa-eye-slash"})])])])]),a("div",{staticClass:"form-signin"},[a("button",{staticClass:"btn btn-lg btn-dark btn-block text-uppercase sign-up",attrs:{type:"submit",onsubmit:"return false"},on:{click:e.signUp}},[e._v(" Sign Up ")]),e.errors.length?a("div",[a("ul",{staticClass:"list-group mt-4"},e._l(e.errors,(function(t,n){return a("li",{key:n,staticClass:"list-group-item list-group-item-danger"},[e._v(" "+e._s(t)+" ")])})),0)]):e._e(),a("hr",{staticClass:"my-4"}),a("button",{directives:[{name:"google-signin-button",rawName:"v-google-signin-button",value:e.clientId,expression:"clientId"}],staticClass:"btn btn-lg btn-google btn-block text-uppercase"},[a("i",{staticClass:"fab fa-google mr-2"}),e._v(" Continue with Google ")]),a("p",{staticClass:"mt-4 float-right"},[e._v(" Already have an account? "),a("b-link",{attrs:{to:"/login?teacherSignup="+e.isTeacherApp}},[e._v("Log in here")])],1)])])])])])])])},I=[],T=(a("b0c0"),a("b41b")),P={name:"Signup",created:function(){this.$emit("update:layout",D)},data:function(){return{clientId:"406805009852-i2g9ccjm8frj23098sp678qnrjn5bmdk.apps.googleusercontent.com",showPassword:!1,name:"",email:"",password:"",isTeacherApp:"true"==this.$route.query.teacherSignup,errors:[]}},mounted:function(){this.$refs.name.focus()},methods:{switchVisibility:function(){var e=document.querySelector("#inputPassword");"password"===e.getAttribute("type")?e.setAttribute("type","text"):e.setAttribute("type","password"),this.showPassword=!this.showPassword},checkForm:function(){this.errors=[],this.name&&this.email&&this.password||this.errors.push("Please fill out all required fields."),this.email&&!this.validEmail(this.email)&&this.errors.push("Valid email required."),this.name&&!this.validName(this.name)&&this.errors.push("Please use the English alphabet and do not include any numbers/special characters in the name field."),this.password&&!this.validPassword(this.password)&&this.errors.push("Your password needs a minimum of 8 characters with at least one capital letter, a number, and a special character.")},validEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},validPassword:function(e){var t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;return t.test(e)},validName:function(e){var t=/^([a-zA-Z ]){2,30}$/;return t.test(e)},signUp:function(){var e=this;this.checkForm(),this.errors.length||p.a.post("api/register",{name:this.name,email:this.email,password:this.password,isTeacherApp:this.isTeacherApp}).then((function(t){200==t.status&&e.$router.go()})).catch((function(t){e.errors=[],e.errors.push(t.response.data)}))},OnGoogleAuthSuccess:function(e){var t=this;p.a.post("api/glogin",{idToken:e,isTeacherApp:this.isTeacherApp}).then((function(e){200==e.status&&t.$router.go()})).catch((function(e){t.errors=[],t.errors.push("Something went wrong during Google Authentication! If you are using incognito mode, make sure you have enabled cookies.")}))},OnGoogleAuthFail:function(e){this.errors=[],this.errors.push("Something went wrong during Google Authentication! If you are using incognito mode, make sure you have enabled cookies.")}}},$=P,A=(a("8d1b"),Object(c["a"])($,E,I,!1,null,null,null)),O=A.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Signup"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-9 col-md-7 col-lg-5 mx-auto"},[a("div",{staticClass:"card card-signin my-5"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title text-center"},[e._v("Log in")]),a("form",{staticClass:"form-signin"},[a("div",{staticClass:"form-label-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],ref:"email",staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address"},domProps:{value:e.email},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.login(t):null},input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("label",{attrs:{for:"inputEmail"}})]),a("div",{staticClass:"form-label-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",autocomplete:"on"},domProps:{value:e.password},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.login(t):null},input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("label",{attrs:{for:"inputPassword"}})])]),a("div",{staticClass:"form-signin"},[a("button",{staticClass:"btn btn-lg btn-dark btn-block text-uppercase sign-up",on:{click:e.login}},[e._v(" Log in ")]),e.errors.length?a("div",[a("ul",{staticClass:"list-group mt-4"},e._l(e.errors,(function(t,n){return a("li",{key:n,staticClass:"list-group-item list-group-item-danger"},[e._v(" "+e._s(t)+" ")])})),0)]):e._e(),a("hr",{staticClass:"my-4"}),a("button",{directives:[{name:"google-signin-button",rawName:"v-google-signin-button",value:e.clientId,expression:"clientId"}],staticClass:"btn btn-lg btn-google btn-block text-uppercase"},[a("i",{staticClass:"fab fa-google mr-2"}),e._v(" Continue with Google ")]),a("p",{staticClass:"mt-4 float-right"},[e._v(" Don't have an account? "),a("b-link",{attrs:{to:"/signup?teacherSignup="+e.isTeacherApp}},[e._v("Sign up here")])],1)])])])])])])])},j=[];p.a.defaults.withCredentials=!0;var N={directives:{GoogleSignInButton:T["a"]},name:"Login",created:function(){this.$emit("update:layout",D)},components:{},data:function(){return{isTeacherApp:"true"==this.$route.query.teacherSignup,clientId:"406805009852-i2g9ccjm8frj23098sp678qnrjn5bmdk.apps.googleusercontent.com",appId:"202539034881612",errors:[],email:"",password:"",host:"api",FB:{},model:{},scope:{}}},mounted:function(){this.$refs.email.focus()},methods:{checkForm:function(){this.errors=[],this.email&&this.password||this.errors.push("Please fill out all required fields."),this.password&&!this.validEmail(this.email)&&this.errors.push("Valid email required.")},validEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},login:function(){var e=this;this.checkForm(),this.errors.length||p.a.post("api/login",{email:this.email,password:this.password,isTeacherApp:this.isTeacherApp}).then((function(t){200==t.status&&e.$router.go()})).catch((function(t){e.errors.push(t.response.data)}))},OnGoogleAuthSuccess:function(e){var t=this;p.a.post("api/glogin",{idToken:e,isTeacherApp:this.isTeacherApp}).then((function(e){200==e.status&&t.$router.go()})).catch((function(e){t.errors=[],t.errors.push("Something went wrong during Google Authentication! If you are using incognito mode, make sure you have enabled cookies.")}))},OnGoogleAuthFail:function(e){this.errors=[],this.errors.push("Something went wrong during Google Authentication! If you are using incognito mode, make sure you have enabled cookies.")},handleSdkInit:function(e){var t=e.FB,a=e.scope;this.FB=t,this.scope=a}}},U=N,q=(a("039a"),Object(c["a"])(U,M,j,!1,null,null,null)),F=q.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"settings mt-4"},[a("b-alert",{staticClass:"mx-5",attrs:{show:e.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v(" Profile updated successfully! ")]),a("b-row",[a("b-col",{attrs:{md:"2"}}),a("b-col",{attrs:{md:"3"}},[e.userData?a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-group list-group-flush profile-list"},[a("li",{staticClass:"list-group-item"},[a("b-link",{on:{click:function(t){e.viewingCard="General"}}},[e._v("General")])],1),a("li",{staticClass:"list-group-item"},[a("b-link",{on:{click:function(t){e.viewingCard="Payment"}}},[e._v("Payment")])],1)])])]):e._e()]),a("b-col",{attrs:{md:"5"}},[e.userData?a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"General"==e.viewingCard,expression:"viewingCard == 'General'"}]},[a("div",{staticClass:"form-group"},[a("label",[a("b",[e._v("Currency")])]),a("b-form-select",{staticClass:"mt-1",attrs:{options:e.options.currency,size:"md"},on:{change:e.updateSettings},model:{value:e.selected.currency,callback:function(t){e.$set(e.selected,"currency",t)},expression:"selected.currency"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"Payment"==e.viewingCard,expression:"viewingCard == 'Payment'"}]},[e._v("p")])])]):e._e()]),a("b-col",{attrs:{md:"2"}})],1)],1)},H=[],X=(a("99af"),a("c975"),function(e,t,a){var n=t.indexOf(e);if(-1!=n)return a[n]}),W=X,Y={name:"Settings",computed:{storeUserData:{get:function(){return C.getters.userData},set:function(e){return e}}},created:function(){this.$emit("update:layout",D)},data:function(){return{dismissSecs:2,dismissCountDown:0,host:"api",userData:null,viewingCard:"General",options:{fluentLanguage:[{value:null,text:"Please select an option"},{value:"a",text:"This is First option"},{value:"b",text:"Selected Option"},{value:{C:"3PO"},text:"This is an option with object value"},{value:"d",text:"This one is disabled",disabled:!0}],nonFluentLanguage:[{value:null,text:"Please select an option"},{value:"a",text:"This is First option"},{value:"b",text:"Selected Option"},{value:{C:"3PO"},text:"This is an option with object value"},{value:"d",text:"This one is disabled",disabled:!0}],timezone:[{value:null,text:"Please select an option"},{value:"a",text:"This is First option"},{value:"b",text:"Selected Option"},{value:{C:"3PO"},text:"This is an option with object value"},{value:"d",text:"This one is disabled",disabled:!0}],currency:[{value:"SGD",text:"$ SGD"},{value:"USD",text:"$ USD"},{value:"JPY",text:"¥ JPY"}]},selected:{timezone:null,currency:"SGD"}}},methods:{updateSettings:function(){var e=this,t={currency:this.selected.currency};p.a.put("".concat(this.host,"/user/").concat(this.userData._id,"/updateProfile"),{settings:t},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){200==t.status&&e.showAlert()})).catch((function(e){console.log(e)}))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs}},mounted:function(){this.userData=this.storeUserData,this.selected.currency=this.userData.settings.currency||"SGD"}},G=Y,V=(a("ef23"),Object(c["a"])(G,z,H,!1,null,null,null)),J=V.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Dashboard"},[e.userData?a("b-modal",{attrs:{id:"edit-pic",size:"lg",title:"Edit profile image"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{on:{click:e.resetCanvas}},[e._v(" Cancel ")]),a("label",{directives:[{name:"show",rawName:"v-show",value:!e.isEditingImage,expression:"!isEditingImage"}],staticClass:"btn btn-primary"},[a("i",{staticClass:"fa fa-image"}),e._v(" Upload image "),a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",name:"image",accept:"image/*"},on:{change:function(t){return e.selectFile(t,"img")}}})]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditingImage,expression:"isEditingImage"}],attrs:{variant:"primary"},on:{click:e.saveProfileImage}},[e._v(" Save ")])]},proxy:!0}],null,!1,3880778367)},[a("img",{directives:[{name:"show",rawName:"v-show",value:!e.isEditingImage,expression:"!isEditingImage"}],staticClass:"dashboard-profile no-cursor",attrs:{alt:"100x100",src:e.imageSourceEdit(e.userData.profileImage)}}),a("preview",{directives:[{name:"show",rawName:"v-show",value:e.isEditingImage,expression:"isEditingImage"}],staticClass:"no-cursor preview",attrs:{width:200,height:200,image:e.profileImage.previewCropperImage.image,coordinates:e.profileImage.previewCropperImage.coordinates}}),a("cropper",{directives:[{name:"show",rawName:"v-show",value:e.isEditingImage,expression:"isEditingImage"}],staticClass:"cropper mt-4",attrs:{debounce:!1,"stencil-component":"circle-stencil",src:e.profileImage.cropperImage},on:{change:e.change}})],1):e._e(),a("b-modal",{attrs:{id:"reg-form",size:"lg","no-close-on-backdrop":!0,"hide-footer":!0},scopedSlots:e._u([{key:"modal-title",fn:function(){return[a("div",[e._v("Welcome to Manabu! Let us know about you!")])]},proxy:!0}])},[e.userData?a("div",["user"!=e.userData.role||e.userData.teacherAppPending?e._e():a("registration-form",{attrs:{submitButtonText:"Submit",formData:e.formData,endpoint:"/user"},on:{"form-submitted":e.onFormSubmit},scopedSlots:e._u([{key:"uniqueSelect",fn:function(){return[a("div",{staticClass:"form-group"},[a("label",[e._v("Target Language")]),a("b-form-select",{attrs:{options:e.optionsPrimaryLanguage,size:"md",userId:e.userId},model:{value:e.formData.nonFluentLanguage,callback:function(t){e.$set(e.formData,"nonFluentLanguage",t)},expression:"formData.nonFluentLanguage"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v("Target Language Level")]),a("b-form-select",{attrs:{options:e.optionsLevel,size:"md","select-size":3},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v("Native Language")]),a("b-form-select",{attrs:{options:e.optionsSecondaryLanguage,size:"md"},model:{value:e.formData.fluentLanguage,callback:function(t){e.$set(e.formData,"fluentLanguage",t)},expression:"formData.fluentLanguage"}})],1)]},proxy:!0}],null,!1,1859708448)}),e.userData.teacherAppPending?a("registration-form",{attrs:{submitButtonText:"Submit",formData:e.formData,endpoint:"/user"},on:{"form-submitted":e.onFormSubmit},scopedSlots:e._u([{key:"uniqueSelect",fn:function(){return[a("div",{staticClass:"form-group"},[a("label",[e._v("I am a")]),a("b-form-select",{attrs:{options:e.optionsTeacherType,size:"md"},model:{value:e.formData.teacherType,callback:function(t){e.$set(e.formData,"teacherType",t)},expression:"formData.teacherType"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"licensed"==e.formData.teacherType,expression:"formData.teacherType == 'licensed'"}],staticClass:"form-group"},[a("label",{attrs:{for:"license"}},[e._v("Upload a PDF of your teaching license (if you cannot find it now, email it to us).")]),a("input",{staticClass:"form-control-file",attrs:{type:"file",id:"license",accept:"application/pdf"},on:{change:function(t){return e.selectFile(t,"pdf")}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v("I will be teaching")]),a("b-form-select",{attrs:{options:e.optionsPrimaryLanguage,size:"md",userId:e.userId},model:{value:e.formData.fluentLanguage,callback:function(t){e.$set(e.formData,"fluentLanguage",t)},expression:"formData.fluentLanguage"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v("I can also speak")]),a("b-form-select",{attrs:{options:e.optionsSecondaryLanguage,size:"md"},model:{value:e.formData.nonFluentLanguage,callback:function(t){e.$set(e.formData,"nonFluentLanguage",t)},expression:"formData.nonFluentLanguage"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v("My "+e._s(e.languageCodeToText(e.formData.nonFluentLanguage,e.optionsSecondaryLanguage))+" level is")]),a("b-form-select",{attrs:{options:e.optionsLevel,size:"md","select-size":3},model:{value:e.formData.level,callback:function(t){e.$set(e.formData,"level",t)},expression:"formData.level"}})],1)]},proxy:!0}],null,!1,1377032833)}):e._e()],1):e._e()]),a("b-modal",{attrs:{id:"my-packages",size:"xl"},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" My packages ")]},proxy:!0},{key:"modal-footer",fn:function(){return[a("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$bvModal.hide("my-packages")}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"primary"},on:{click:e.updatePackages}},[e._v(" Save ")])]},proxy:!0}])},[a("div",[a("b-input-group",{staticClass:"mb-4"},[a("b-input-group-prepend",[a("b-dropdown",{attrs:{id:"dropdown-1"}},[a("b-dropdown-item",{on:{click:function(t){e.hourlyRate.selectedCurrency="USD"}}},[e._v("$ USD")]),a("b-dropdown-item",{on:{click:function(t){e.hourlyRate.selectedCurrency="SGD"}}},[e._v("$ SGD")]),a("b-dropdown-item",{on:{click:function(t){e.hourlyRate.selectedCurrency="JPY"}}},[e._v("¥ JPY")])],1),a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._v(e._s(e.hourlyRate.selectedCurrency))])])],1),a("b-form-input",{ref:"hourlyRate",attrs:{type:"number",min:"0.00",state:e.validateState("myRate"),placeholder:"My hourly rate"},model:{value:e.$v.hourlyRate.myRate.$model,callback:function(t){e.$set(e.$v.hourlyRate.myRate,"$model",t)},expression:"$v.hourlyRate.myRate.$model"}})],1)],1),a("div",[a("b-card-group",{attrs:{deck:""}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"},scopedSlots:e._u([{key:"header",fn:function(){return[a("h6",{staticClass:"mb-0"},[e._v(" Vigorous plan - "+e._s(e.hourlyRate.currencyIcon)+e._s((Math.round(21*e.hourlyRate.myRate*2)/2).toFixed(1))+"/month ")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"form-check float-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hourlyRate.offering,expression:"hourlyRate.offering"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"vigorous",id:"flexCheckDefault",checked:""},domProps:{checked:Array.isArray(e.hourlyRate.offering)?e._i(e.hourlyRate.offering,"vigorous")>-1:e.hourlyRate.offering},on:{change:function(t){var a=e.hourlyRate.offering,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i="vigorous",r=e._i(a,i);n.checked?r<0&&e.$set(e.hourlyRate,"offering",a.concat([i])):r>-1&&e.$set(e.hourlyRate,"offering",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.hourlyRate,"offering",s)}}}),a("label",{staticClass:"form-check-label"},[e._v(" Offer ")])])]},proxy:!0}])},[a("div",[e._v(" Students will have 21 lessons with you every month. This is about 5 lessons every week. ")])]),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"},scopedSlots:e._u([{key:"header",fn:function(){return[a("h6",{staticClass:"mb-0"},[e._v(" Moderate plan - "+e._s(e.hourlyRate.currencyIcon)+e._s((Math.round(12*e.hourlyRate.myRate*2)/2).toFixed(1))+"/month ")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"form-check float-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hourlyRate.offering,expression:"hourlyRate.offering"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"moderate",id:"flexCheckDefault",checked:""},domProps:{checked:Array.isArray(e.hourlyRate.offering)?e._i(e.hourlyRate.offering,"moderate")>-1:e.hourlyRate.offering},on:{change:function(t){var a=e.hourlyRate.offering,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i="moderate",r=e._i(a,i);n.checked?r<0&&e.$set(e.hourlyRate,"offering",a.concat([i])):r>-1&&e.$set(e.hourlyRate,"offering",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.hourlyRate,"offering",s)}}}),a("label",{staticClass:"form-check-label"},[e._v(" Offer ")])])]},proxy:!0}])},[a("div",[e._v(" Students will have 12 lessons with you every month. This is about 3 lessons every week. ")])]),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"},scopedSlots:e._u([{key:"header",fn:function(){return[a("h6",{staticClass:"mb-0"},[e._v(" Light plan - "+e._s(e.hourlyRate.currencyIcon)+e._s((Math.round(5*e.hourlyRate.myRate*2)/2).toFixed(1))+"/month ")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"form-check float-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hourlyRate.offering,expression:"hourlyRate.offering"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"light",id:"flexCheckDefault",checked:""},domProps:{checked:Array.isArray(e.hourlyRate.offering)?e._i(e.hourlyRate.offering,"light")>-1:e.hourlyRate.offering},on:{change:function(t){var a=e.hourlyRate.offering,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i="light",r=e._i(a,i);n.checked?r<0&&e.$set(e.hourlyRate,"offering",a.concat([i])):r>-1&&e.$set(e.hourlyRate,"offering",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.hourlyRate,"offering",s)}}}),a("label",{staticClass:"form-check-label"},[e._v(" Offer ")])])]},proxy:!0}])},[a("div",[e._v(" Students will have 5 lessons with you every month. This is about 1 lessons every week. ")])])],1)],1)]),e.loading?a("div",{staticClass:"d-flex justify-content-center my-4"},[a("b-spinner",{attrs:{label:"Loading..."}})],1):a("div",{staticClass:"mt-5"},[a("b-row",[a("b-col",{attrs:{md:"2"}}),a("b-col",{attrs:{md:"3"}},[e.userData?a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"picture-container"},[a("img",{staticClass:"dashboard-profile",attrs:{alt:"100x100",src:e.imageSourceEdit(e.userData.profileImage)},on:{mouseover:function(t){e.isHoveringPic=!0},mouseleave:function(t){e.isHoveringPic=!1},click:e.editProfile}})]),a("div",{staticClass:"text-center mt-2"},[a("h5",[e._v(e._s(this.userData.name))]),e._l(e.userData.fluentLanguages.concat(e.userData.nonFluentLanguages),(function(t){return a("div",{key:t,staticClass:"mx-1",staticStyle:{display:"inline"}},[e._v(" "+e._s(e.languageCodeToText(t))+" "),e._l(5,(function(n,s){return a("span",{key:s,staticClass:"level",class:e.languageLevelBars(t,s)})}))],2)}))],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditingBio,expression:"!isEditingBio"}],staticClass:"mt-2 mb-0",staticStyle:{cursor:"pointer"},domProps:{innerHTML:e._s(e.formatBio(e.userData.profileBio))},on:{click:e.startEditBio}}),"teacher"==e.userData.role||e.userData.teacherAppPending?a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isEditingBio,expression:"isEditingBio"}]},[a("b-form-input",{staticClass:"mt-4",attrs:{placeholder:"Youtube link of self-introduction video"},model:{value:e.userData.teacherData.introductionVideo,callback:function(t){e.$set(e.userData.teacherData,"introductionVideo",t)},expression:"userData.teacherData.introductionVideo"}})],1)]):e._e(),a("quill-editor",{directives:[{name:"show",rawName:"v-show",value:e.isEditingBio,expression:"isEditingBio"}],ref:"quillEditor",staticClass:"my-3",on:{change:function(t){return e.ensureMaxChars(t)}},model:{value:e.editedBio,callback:function(t){e.editedBio=t},expression:"editedBio"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isEditingBio,expression:"isEditingBio"}],class:{danger:this.maxInputLength-this.editedBio.replace(/<[^>]*>?/gm,"").length==0}},[e._v(" "+e._s(this.maxInputLength-this.editedBio.replace(/<[^>]*>?/gm,"").length)+" characters remaining ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditingBio,expression:"isEditingBio"}],staticClass:"float-right mt-3",attrs:{variant:"primary"},on:{click:e.saveBio}},[e._v(" Save ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditingBio,expression:"isEditingBio"}],staticClass:"mr-2 float-right mt-3",attrs:{variant:"secondary"},on:{click:e.cancelBio}},[e._v(" Cancel ")])],1)]):e._e(),e.userData?a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-group list-group-flush profile-list"},[a("li",{staticClass:"list-group-item"},[a("b-link",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#edit-calendar",expression:"'#edit-calendar'"}]},[e._v("My calendar")])],1),"teacher"==e.userData.role||e.userData.teacherAppPending?a("li",{staticClass:"list-group-item"},[a("b-link",{on:{click:function(t){return e.$bvModal.show("my-packages")}}},[e._v("My packages")])],1):e._e(),a("li",{staticClass:"list-group-item"},[a("b-link",{attrs:{to:"/settings"}},[e._v("Settings")])],1),a("li",{staticClass:"list-group-item"},[a("b-link",{attrs:{to:"/user/"+this.userId}},[e._v("View public profile")])],1)])])]):e._e()]),a("b-col",{attrs:{md:"5"}},[e.userData.teacherAppPending?a("div",[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-header"},[a("span",{staticClass:"mt-2"},[e._v(" To get approved for teaching, make an 1 hour appointment with Misaki ")])]),a("div",{staticClass:"card-body"},[a("p",[e._v(" Misaki will be interviewing you about your experience in teaching Japanese, etc. ")]),a("b-button",{attrs:{variant:"info"},on:{click:e.adminTeacherTrans}},[e._v("Schedule appointment")])],1)])]):e._e(),e.appointments.length>0?a("div",e._l(e.appointments,(function(t){return a("div",{key:t._id,staticClass:"card mb-3",class:t.status+"-card"},[a("div",{staticClass:"card-header"},[a("span",{staticClass:"mt-2"},[e._v("Appointment with "+e._s(t.userData.name)+" -- "+e._s(t.status)+" ")])]),a("div",{staticClass:"card-body"},[a("img",{staticClass:"mini-image",attrs:{alt:"100x100",src:e.imageSourceEdit(t.userData.profileImage)}}),a("p",[e._v(" "+e._s(e.formatDate(t.from,"MMM DD @ h:mma"))+"-"+e._s(e.formatDate(t.to,"h:mma"))+" on Skype (teacher.username) ")]),a("p",[e._v("Appointment agenda:")])])])})),0):a("div",[e._v("no appointments yet, find teacher")])]),a("b-col",{attrs:{md:"2"}})],1),a("div",["teacher"==e.userData.role||"admin"==e.userData.role?a("edit-calendar",{attrs:{hostedBy:e.userData._id,id:"edit-calendar"}}):e._e()],1)],1)],1)},Z=[],Q=(a("4160"),a("498a"),a("159b"),a("5a0c")),ee=a.n(Q),te=a("a2c1"),ae=a("1dce"),ne=a("b5ae");function se(e,t,a){return ie.apply(this,arguments)}function ie(){return ie=Object(d["a"])(regeneratorRuntime.mark((function e(t,a,n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://localhost:5000/api/schedule/".concat(t,"/appointment/").concat(a,"/").concat(n),{headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){console.log(e)}));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}var re=se,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md"},[a("div",[a("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("div",{staticClass:"form-group"},[e._t("uniqueSelect")],2),a("div",{staticClass:"form-group"},[a("label",[e._v("Country/Region")]),a("b-form-select",{attrs:{options:e.optionsRegion,size:"md"},on:{change:e.updateTimezone},model:{value:e.defaultData.region,callback:function(t){e.$set(e.defaultData,"region",t)},expression:"defaultData.region"}}),e.submitted&&0==e.defaultData.region.length?a("div",{staticClass:"invalid"},[e._v(" Please provide a region ")]):e._e()],1),a("div",{staticClass:"form-group"},[a("label",[e._v("Timezone")]),a("b-form-select",{attrs:{options:e.optionsTz,size:"md"},model:{value:e.defaultData.timezone,callback:function(t){e.$set(e.defaultData,"timezone",t)},expression:"defaultData.timezone"}}),e.submitted&&0==e.defaultData.timezone.length?a("div",{staticClass:"invalid"},[e._v(" Please provide a timezone ")]):e._e()],1),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.handleSubmit()}}},[e._v(" "+e._s(e.submitButtonText)+" ")])])])])])])])])},ce=[],le=a("5530"),ue=a("fc20"),de=a.n(ue),he={name:"RegistrationForm1",props:{submitButtonText:String,formData:Object,endpoint:String,userId:String},computed:{storeUserData:{get:function(){return C.getters.userData},set:function(e){return e}}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n in a=de.a.getAllCountries(),a)s={value:n,text:"".concat(a[n].name," - ").concat(n)},e.optionsRegion.push(s);e.optionsRegion.sort(e.compare),e.userData=e.storeUserData;case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{host:"api",optionsRegion:[],optionsTz:["Asia/Singapore (UTC+08:00)"],defaultData:{region:"SG",timezone:"Asia/Singapore (UTC+08:00)"},userData:null,submitted:!1}},methods:{compare:function(e,t){return e.text<t.text?-1:e.text>t.text?1:0},updateTimezone:function(){this.optionsTz=[];for(var e=de.a.getTimezonesForCountry(this.defaultData.region),t=0;t<e.length;t++)this.optionsTz.push("".concat(e[t].name," (UTC").concat(e[t].utcOffsetStr,")"))},handleSubmit:function(){var e=this;if(this.formData.fluentLanguage&&this.formData.nonFluentLanguage&&this.formData.level&&this.defaultData.region&&this.defaultData.timezone){var t=Object(le["a"])(Object(le["a"])({},this.formData),this.defaultData);t.fluentLanguages=["".concat(t.fluentLanguage,"-C2")],t.nonFluentLanguages=["".concat(t.nonFluentLanguage,"-").concat(t.level)],p.a.put("".concat(this.host).concat(this.endpoint,"/").concat(this.userData._id,"/updateProfile"),t,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(){e.$emit("form-submitted")})).catch((function(e){console.log(e)}))}}}},pe=he,me=(a("005e"),Object(c["a"])(pe,oe,ce,!1,null,"b4a4e2bc",null)),fe=me.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"EditCalendar"},[a("b-modal",{attrs:{id:"update-modal","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" "+e._s(e.modalTitleText)+" ")]},proxy:!0},{key:"modal-footer",fn:function(){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr,expression:"!updateErr"}],on:{click:e.resetOnCancel}},[e._v(" Exit ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.isRejecting,expression:"!updateErr && !isRejecting"}],attrs:{variant:"danger"},on:{click:function(t){e.isRejecting=!0,e.cancelAppointment(e.selectedLessonId)}}},[e._v(" Cancel ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&e.isRejecting,expression:"!updateErr && isRejecting"}],attrs:{variant:"danger"},on:{click:function(t){e.isRejectingConfirmation=!0,e.cancelAppointment(e.selectedLessonId)}}},[e._v(" Yes ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.updateErr,expression:"updateErr"}],attrs:{variant:"primary"},on:{click:function(t){e.updateErr=!1,e.$bvModal.hide("update-modal")}}},[e._v(" OK ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.isRejecting,expression:"!updateErr && !isRejecting"}],attrs:{variant:"primary"},on:{click:function(t){return e.confirmAppointment(e.selectedLessonId)}}},[e._v(" Confirm ")])]},proxy:!0}])},[e.selectedReservedBy?a("div",{staticClass:"profile-popup"},[a("img",{staticClass:"rounded-circle center-image no-cursor",attrs:{alt:"100x100",src:e.imageSourceEdit(e.selectedReservedBy.profileImage)}}),a("b-link",{staticClass:"profile-link",attrs:{to:"/user/"+e.selectedReservedBy._id}},[a("h5",{staticClass:"text-center mb-2 mt-2"},[e._v(e._s(e.selectedReservedBy.name))])]),a("div",{staticClass:"text-center"},[e._l(e.selectedReservedBy.fluentLanguages.concat(e.selectedReservedBy.nonFluentLanguages),(function(t){return a("div",{key:t,staticClass:"mx-1",staticStyle:{display:"inline"}},[e._v(" "+e._s(t)+" "),e._l(5,(function(n,s){return a("span",{key:s,staticClass:"level",class:e.languageLevelBars(t,s)})}))],2)})),a("p",[e._v("Region: "+e._s(e.selectedReservedBy.region)+" ("+e._s(e.selectedReservedBy.timezone)+")")])],2),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr,expression:"!updateErr"}],staticClass:"my-4"},[e._v("lesson information goes here")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&e.isRejecting,expression:"!updateErr && isRejecting"}],staticClass:"form-group"},[a("label",[e._v("Reason for rejecting appointment")]),a("b-form-select",{attrs:{options:e.cancellationSelect,size:"md"},model:{value:e.cancellationReason,callback:function(t){e.cancellationReason=t},expression:"cancellationReason"}})],1)],1):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:e.updateErr,expression:"updateErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. Please try again. ")])]),a("b-modal",{attrs:{id:"delete-modal",title:"Delete this timeslot?","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.deleteErr,expression:"!updateErr && !deleteErr"}],on:{click:function(t){return e.$bvModal.hide("delete-modal")}}},[a("div",[e._v("Cancel")])]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.deleteErr,expression:"!deleteErr"}],attrs:{variant:"danger"},on:{click:function(t){return e.removeEvent(e.event_information)}}},[a("div",[e._v("Delete")])]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.deleteErr,expression:"deleteErr"}],attrs:{variant:"primary"},on:{click:function(t){e.deleteErr=!1,e.$bvModal.hide("delete-modal")}}},[a("div",[e._v("OK")])])]},proxy:!0}])},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.deleteErr,expression:"!deleteErr"}],staticClass:"my-4"},[e._v(" Are you sure you want to delete this timeslot? ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.deleteErr,expression:"deleteErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. Please make sure you are not deleting a timeslot containing reserved lessons. ")])]),a("div",[e.isCalendarLoaded?a("kalendar",{ref:"kalendar",staticClass:"mb-5",attrs:{configuration:e.calendar_settings,events:e.events},on:{"update:events":function(t){e.events=t}},scopedSlots:e._u([{key:"creating-card",fn:function(t){var n=t.event_information;return a("div",{},[a("span",{staticClass:"appointment-title"},[e._v(" Available ("+e._s(e.parseISOString(n.start_time))+" - "+e._s(e.parseISOString(n.end_time))+") ")])])}},{key:"created-card",fn:function(t){var n=t.event_information;return a("div",{staticClass:"details-card",class:{"pending-teacher":n.data&&"pending"==n.data.status&&!e.onEventClassBind(n.data.from,e.sessionConfirmed)&&!e.onEventClassBind(n.data.from,e.sessionScheduleChange)&&!e.onEventClassBind(n.data.from,e.sessionStudentIssue),"student-reserved":n.data&&"confirmed"==n.data.status||e.onEventClassBind(n.data.from,e.sessionConfirmed),"dotted-border":n.data&&("pending"==n.data.status||"confirmed"==n.data.status||"cancelled"==n.data.status),"schedule-change":n.data&&"schedule change"==n.data.cancellationReason||e.onEventClassBind(n.data.from,e.sessionScheduleChange),"student-issue":n.data&&"student issue"==n.data.cancellationReason||e.onEventClassBind(n.data.from,e.sessionStudentIssue)},attrs:{id:n.data._id},on:{click:function(t){return e.onSlotClick(n)}}},[n.data&&n.data.reservedBy?a("span",{staticClass:"appointment-title ml-2"},[e._v(" "+e._s(e.toTitleCase(e.getEventData(n.data._id).data.status))+" ("+e._s(e.parseISOString(n.start_time))+" - "+e._s(e.parseISOString(n.end_time))+") ")]):e._e(),n.data&&n.data.reservedBy?a("span",{staticClass:"appointment-title ml-2"},[e._v(" "+e._s(n.data.reservedByUserData.name)+" ")]):e._e(),n.data.reservedBy||n.data.isDuplicate?e._e():a("button",{staticClass:"remove",on:{click:function(t){return e.deleteAppointment(n)}}},[new Date<new Date(n.start_time)?a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true","data-reactid":"1326"}},[a("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),a("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),a("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})]):e._e()])])}},{key:"popup-form",fn:function(t){var n=t.popup_information;return a("div",{},[a("div",{staticClass:"row"},[a("input",{staticClass:"app-button",attrs:{type:"submit",id:"btnSearch",value:"Save"},on:{click:function(t){return e.addEvent(n)}}}),a("input",{staticClass:"app-button",attrs:{type:"submit",id:"btnClearSearch",value:"Cancel"},on:{click:function(t){return e.$kalendar.closePopups()}}})])])}}],null,!1,606997125)}):a("div",{staticClass:"d-flex justify-content-center my-4"},[a("b-spinner",{attrs:{label:"Loading..."}})],1)],1)],1)},ge=[],ye=(a("4de4"),a("7db0"),a("c740"),a("fb6a"),a("ac1f"),a("5319"),a("1276"),a("5c28"));function be(e,t){var a=e.split("-"),n=a[1],s={A1:0,A2:1,B1:2,B2:3,C1:4,C2:5};return t>=s[n]?{"level-color-1":!0}:5==s[n]?{"level-color-3":!0}:{"level-color-2":!0}}var we=be;function Ce(e){return _e.apply(this,arguments)}function _e(){return _e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://localhost:5000/api/user/".concat(t),{headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){throw e}));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)}))),_e.apply(this,arguments)}var ke=Ce;function xe(e){return""==e?a("6158"):e}var De=xe,Se={name:"EditCalendar",components:{Kalendar:ye["a"]},props:{hostedBy:String},mounted:function(){this.getScheduleData()},data:function(){return{host:"api",calendar_settings:{style:"material_design",view_type:"week",cell_height:10,scrollToNow:!1,start_day:(new Date).toISOString(),read_only:!1,day_starts_at:0,day_ends_at:24,overlap:!1,past_event_creation:!1},updateErr:!1,deleteErr:!1,isCalendarLoaded:!1,isModalLoaded:!1,events:[],currentDay:(new Date).toISOString(),selectedLessonId:"",selectedReservedBy:null,event_information:null,cancellationSelect:[{value:"schedule change",text:"Schedule change"},{value:"student issue",text:"I am uncomfortable with this student"}],cancellationReason:"schedule change",modalTitleText:"Confirm this appointment?",isRejecting:!1,isRejectingConfirmation:!1,sessionStudentIssue:[],sessionScheduleChange:[],sessionConfirmed:[]}},methods:{imageSourceEdit:De,fetchUserData:ke,languageLevelBars:we,onEventClassBind:function(e,t){var a=void 0!=t.find((function(t){return t.from==e}));return a},resetOnCancel:function(){this.isRejecting=!1,this.isRejectingConfirmation=!1,this.modalTitleText="Confirm this Appointment?",this.$bvModal.hide("update-modal")},toTitleCase:function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},recursiveSlotEdit:function(e){var t=this.events.find((function(t){return t.from==e.from}));t?(e.from=t.to,e.data.isDuplicate=!0,this.recursiveSlotEdit(e)):e.from!=e.to&&this.events.push(e)},cancelAppointment:function(e){var t=this;this.modalTitleText="Are you sure you want to cancel the appointment?",this.isRejecting&&this.isRejectingConfirmation&&p.a.put("".concat(this.host,"/schedule/appointment/").concat(this.selectedLessonId),{status:"cancelled",cancellationReason:this.cancellationReason.toLowerCase()},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(a){if(200==a.status){var n=a.data;p.a.get("".concat(t.host,"/transaction/packageTransaction/").concat(n.packageTransactionId),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(a){if(200==a.status){var s=a.data;p.a.put("".concat(t.host,"/transaction/packageTransaction/").concat(n.packageTransactionId),{remainingAppointments:s.remainingAppointments+1},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var a=Object(d["a"])(regeneratorRuntime.mark((function a(s){var i,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(200!=s.status){a.next=11;break}return a.next=3,ke(n.reservedBy);case 3:i=a.sent,r=t.events.findIndex((function(t){return t.data._id==e})),o={from:n.from,to:n.to,data:{from:n.from,to:n.to,isAppointment:!0,_id:n._id,hostedBy:n.hostedBy,reservedBy:n.reservedBy,reservedByUserData:i,status:n.status,cancellationReason:n.cancellationReason}},-1!=r&&(t.events[r]=o),t.$bvModal.hide("update-modal"),t.isRejecting=!1,t.isRejectingConfirmation=!1,"student issue"==t.cancellationReason.toLowerCase()?t.sessionStudentIssue.push(o):t.sessionScheduleChange.push(o);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}))}})).catch((function(e){t.updateErr=!0}))},getEventData:function(e){var t=this.events.find((function(t){return t.data._id==e}));return t},confirmAppointment:function(e){var t=this;p.a.put("".concat(this.host,"/schedule/appointment/").concat(this.selectedLessonId),{status:"confirmed"},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(){var a=Object(d["a"])(regeneratorRuntime.mark((function a(n){var s,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(200!=n.status){a.next=9;break}return a.next=3,ke(n.data.reservedBy);case 3:s=a.sent,i=t.events.findIndex((function(t){return t.data._id==e})),r={from:n.data.from,to:n.data.to,data:{from:n.data.from,to:n.data.to,isAppointment:!0,_id:n.data._id,hostedBy:n.data.hostedBy,reservedBy:n.data.reservedBy,reservedByUserData:s,status:n.data.status,cancellationReason:n.data.cancellationReason}},-1!=i&&(t.events[i]=r),t.sessionConfirmed.push(n.data),t.$bvModal.hide("update-modal");case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){t.updateErr=!0}))},onSlotClick:function(e){var t=new Date>new Date(e.start_time);t||e.data.hostedBy!=this.hostedBy||"pending"!=e.data.status&&"confirmed"!=e.data.status||(this.selectedLessonId=e.data._id,this.selectedReservedBy=e.data.reservedByUserData,this.$bvModal.show("update-modal"))},getScheduleData:function(){var e=this;this.events=[];var t=ee()().subtract(1,"month"),a=ee()().add(3,"month");p.a.get("".concat(this.host,"/schedule/").concat(this.hostedBy,"/availableTime/").concat(t.toISOString(),"/").concat(a.toISOString())).then((function(n){200==n.status&&p.a.get("".concat(e.host,"/schedule/").concat(e.hostedBy,"/appointment/").concat(t.toISOString(),"/").concat(a.toISOString())).then(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(a){var s,i,r,o,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!=a.status){t.next=19;break}s=n.data,i=a.data.filter((function(e){return"student issue"!=e.cancellationReason&&"student cancel"!=e.cancellationReason})),r=0;case 4:if(!(r<i.length)){t.next=17;break}return t.next=7,ke(i[r].reservedBy);case 7:if(o=t.sent,i[r].reservedBy!=e.hostedBy){t.next=12;break}return t.next=11,ke(i[r].hostedBy);case 11:o=t.sent;case 12:c={from:i[r].from,to:i[r].to,data:{from:i[r].from,to:i[r].to,isAppointment:!0,_id:i[r]._id,hostedBy:i[r].hostedBy,reservedBy:i[r].reservedBy,reservedByUserData:o,status:i[r].status,cancellationReason:i[r].cancellationReason}},e.events.push(c);case 14:r++,t.next=4;break;case 17:for(l=0;l<s.length;l++)u={from:s[l].from,to:s[l].to,data:{isAppointment:!1,_id:s[l]._id,hostedBy:s[l].hostedBy}},e.recursiveSlotEdit(u);e.isCalendarLoaded=!0;case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},parseISOString:function(e){var t=e.split("T");return t[1].substring(0,5)},deleteAppointment:function(e){this.$bvModal.show("delete-modal"),this.event_information=e},removeEvent:function(e){var t=this;this.event_information=e;var a={hostedBy:this.hostedBy,from:ee()(e.start_time).toISOString(),to:ee()(e.end_time).toISOString()};p.a.delete("".concat(this.host,"/schedule/availableTime"),{headers:{"X-Requested-With":"XMLHttpRequest"},data:{deleteObj:a}}).then((function(a){if(200==a.status){var n=e.start_time.slice(0,10);t.$kalendar.removeEvent({day:n,key:e.key,id:e.kalendar_id}),t.deleteErr=!1,t.$bvModal.hide("delete-modal")}})).catch((function(e){t.deleteErr=!0}))},addEvent:function(e,t){var a={from:e.start_time,to:e.end_time,data:{hostedBy:this.hostedBy}},n=new Date(a.from),s=new Date(a.to),i=ee()(s).diff(ee()(n),"minutes");n<=new Date?alert("You cannot make an appointment in the past."):i<30?alert("Your appointments must be at least 30 minutes."):i%30!=0?alert("Your appointments must be in 30 minute to 1 hour intervals."):0!=n.getMinutes()&&30!=n.getMinutes()?alert("You cannot start your appointments at that time (must be at the start of the hour or 30 minutes in)."):(this.$kalendar.addNewEvent(a),this.$kalendar.closePopups(),p.a.post("".concat(this.host,"/schedule/availableTime"),{hostedBy:this.hostedBy,from:new Date(a.from).toISOString(),to:new Date(a.to).toISOString()},{headers:{"X-Requested-With":"XMLHttpRequest"}}))}}},Re=Se,Le=(a("8434"),Object(c["a"])(Re,ve,ge,!1,null,null,null)),Be=Le.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ViewCalendar"},[a("b-modal",{attrs:{id:"complete-modal",title:"Success!","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.reserveErr=!1,e.$bvModal.hide("complete-modal")}}},[e._v(" OK ")])]},proxy:!0}])},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.reserveErr,expression:"!reserveErr"}],staticClass:"my-4"},[e._v(" Your reservation has been made and is pending confirmation. You can reschedule appointments before they begin and can cancel them anytime before they start. ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.reserveErr,expression:"reserveErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. Please try again. ")])]),a("b-modal",{attrs:{id:"update-modal","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" "+e._s(e.modalTitleText)+" ")]},proxy:!0},{key:"modal-footer",fn:function(){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr,expression:"!updateErr"}],on:{click:function(t){return e.resetOnCancel("update-modal")}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isCancelling,expression:"!isCancelling"}]},[e._v(" Hide ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isCancelling,expression:"isCancelling"}]},[e._v(" No ")])]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.isCancelling,expression:"!updateErr && !isCancelling"}],attrs:{variant:"danger"},on:{click:function(t){e.isCancelling=!0,e.cancelAppointment(e.cancelStartTime)}}},[e._v(" Cancel ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&e.isCancelling,expression:"!updateErr && isCancelling"}],attrs:{variant:"danger"},on:{click:function(t){e.isCancellingConfirmation=!0,e.cancelAppointment(e.cancelStartTime)}}},[e._v(" Yes ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.updateErr,expression:"updateErr"}],attrs:{variant:"primary"},on:{click:function(t){e.updateErr=!1,e.$bvModal.hide("update-modal")}}},[e._v(" OK ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr&&!e.isCancelling&&e.rescheduleSlotLimit>0,expression:"!updateErr && !isCancelling && rescheduleSlotLimit > 0"}],attrs:{variant:"primary"},on:{click:e.prepareReschedule}},[e._v(" Reschedule ")])]},proxy:!0}])},[e.selectedHostedBy?a("div",{staticClass:"profile-popup"},[a("img",{staticClass:"rounded-circle center-image no-cursor",attrs:{alt:"100x100",src:e.imageSourceEdit(e.selectedHostedBy.profileImage)}}),a("b-link",{staticClass:"profile-link",attrs:{to:"/user/"+e.selectedHostedBy._id}},[a("h5",{staticClass:"text-center mb-2 mt-2"},[e._v(e._s(e.selectedHostedBy.name))])]),a("div",{staticClass:"text-center"},[e._l(e.selectedHostedBy.fluentLanguages.concat(e.selectedHostedBy.nonFluentLanguages),(function(t){return a("div",{key:t,staticClass:"mx-1",staticStyle:{display:"inline"}},[e._v(" "+e._s(t)+" "),e._l(5,(function(n,s){return a("span",{key:s,staticClass:"level",class:e.languageLevelBars(t,s)})}))],2)})),a("p",[e._v(" Region: "+e._s(e.selectedHostedBy.region)+" ["+e._s(e.selectedHostedBy.timezone)+"] ")])],2),a("h6",{directives:[{name:"show",rawName:"v-show",value:!e.updateErr,expression:"!updateErr"}],staticClass:"my-4 text-center"},[e._v(" lesson information goes here "+e._s(e.getAppointmentTime())+" ")])],1):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:e.updateErr,expression:"updateErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. If you are rescheduling, make sure you do it before the lesson starts. ")])]),a("b-modal",{attrs:{id:"reschedule-modal",title:"Reschedule confirmation","no-close-on-backdrop":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],on:{click:function(t){return e.resetOnCancel("reschedule-modal")}}},[e._v(" Exit ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],attrs:{variant:"info"},on:{click:function(t){return e.$bvModal.hide("reschedule-modal")}}},[e._v(" No ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.rescheduleErr,expression:"rescheduleErr"}],attrs:{variant:"primary"},on:{click:function(t){e.rescheduleErr=!1,e.$bvModal.hide("reschedule-modal")}}},[e._v(" OK ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],attrs:{variant:"primary"},on:{click:e.rescheduleAppointment}},[e._v(" Yes ")])]},proxy:!0}])},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.rescheduleErr,expression:"!rescheduleErr"}],staticClass:"my-4"},[e._v(" Are you sure you want to reschedule the appointment to "+e._s(e.getRescheduleTime())+"? ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.rescheduleErr,expression:"rescheduleErr"}],staticClass:"my-4"},[e._v(" There was an error processing your request. If you are rescheduling, make sure you do it before the lesson starts. ")])]),e.isLoaded?a("div",[e.isRescheduling?a("div",[a("h4",{staticClass:"text-center slots-left"},[e._v("Click a slot to reschedule")])]):a("div",[e.nonReservableCalendar?e._e():a("h4",{staticClass:"text-center slots-left"},[e._v(" Remaining timeslots: "+e._s(e.reservationSlotLimit)+". Reschedules: "+e._s(e.rescheduleSlotLimit)+". Appointments left until free lesson: "+e._s(e.reservationLength/5-e.minuteBank/5)+" ")])]),a("button",{staticClass:"add-manual",class:{"enabled-button":e.reservationSlotLimit<=e.reservationSlotLimit&&e.currentlySelected.length>0},attrs:{disabled:e.reservationSlotLimit==e.reservationSlotLimit&&0==e.currentlySelected.length},on:{click:function(t){return e.createAppointments()}}},[a("i",{staticClass:"fas fa-arrow-right"})]),a("kalendar",{ref:"kalendar",attrs:{configuration:e.calendar_settings,events:e.events},on:{"update:events":function(t){e.events=t}},scopedSlots:e._u([{key:"created-card",fn:function(t){var n=t.event_information;return a("div",{staticClass:"details-card",class:{"booked-by-self":"confirmed"==n.data.status&&n.data.reservedBy==e.reservedBy&&!e.onEventClassBind(n.data.from,e.prevRescheduledLessons)&&!e.onEventClassBind(n.data.from,e.sessionCancelledLessons),"booked-by-other":n.data.reservedBy!=e.reservedBy&&""!=n.data.reservedBy&&"student issue"!=n.data.cancellationReason&&"student cancel"!=n.data.cancellationReason,pending:"pending"==n.data.status&&n.data.reservedBy==e.reservedBy&&!e.onEventClassBind(n.data.from,e.prevRescheduledLessons)||e.onEventClassBind(n.data.from,e.sessionPendingLessons)&&!e.onEventClassBind(n.data.from,e.sessionCancelledLessons)||e.onEventClassBind(n.data.from,e.sessionRescheduledLessons),"on-select":e.onEventClassBind(n.data.from,e.currentlySelected),cancelled:"cancelled"==n.data.status&&n.data.reservedBy==e.reservedBy||e.onEventClassBind(n.data.from,e.sessionCancelledLessons),restricted:(new Date>new Date(n.data.from)||e.isOnSameDay(new Date,new Date(n.data.from)))&&(e.reservedBy!=n.data.reservedBy||""==e.reservedBy)},attrs:{id:n.data.from},on:{click:function(t){return e.onClick(n.data)}}},[a("span",{staticClass:"time appointment-title",staticStyle:{"text-align":"left"}},[e._v(e._s(e.parseISOString(n.start_time))+" - "+e._s(e.parseISOString(n.end_time))+" ")])])}}],null,!1,1719083677)})],1):a("div",{staticClass:"d-flex justify-content-center my-4"},[a("b-spinner",{attrs:{label:"Loading..."}})],1)],1)},Ie=[],Te=(a("d81d"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("2909")),Pe=a("e418"),$e=a.n(Pe);ee.a.extend($e.a);var Ae={name:"ViewCalendar",components:{Kalendar:ye["a"]},created:function(){this.$emit("update:layout",D)},props:{hostedByProp:String},computed:{storeUserData:{get:function(){return C.getters.userData},set:function(e){return e}}},watch:{storeUserData:function(e){this.user=e}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.user=e.storeUserData,e.hostedBy=e.$route.params.hostedBy||e.hostedByProp,e.$route.params.hostedBy&&e.$route.params.packageTransactionId?p.a.get("".concat(e.host,"/transaction/packageTransaction/").concat(e.$route.params.packageTransactionId)).then((function(t){200==t.status&&t.data.reservedBy==e.user._id&&(e.reservedBy=t.data.reservedBy,e.reservationSlotLimit=t.data.remainingAppointments,e.rescheduleSlotLimit=t.data.remainingReschedules,e.reservationLength=t.data.reservationLength,p.a.get("".concat(e.host,"/transaction/minuteBank/").concat(e.hostedBy,"/").concat(e.reservedBy)).then((function(t){200==t.status&&(e.minuteBank=t.data.minuteBank,e.getScheduleData())})))})).catch((function(e){console.log(e)})):!e.$route.params.hostedBy&&!e.hostedByProp||e.$route.params.packageTransactionId||(e.reservedBy="",e.reservationSlotLimit=0,e.rescheduleSlotLimit=0,e.reservationLength=60,e.nonReservableCalendar=!0,e.getScheduleData());case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{user:null,host:"api",reservedBy:"",hostedBy:"",reservationLength:null,rescheduleSlotLimit:null,calendar_settings:{style:"material_design",view_type:"week",cell_height:10,scrollToNow:!1,start_day:(new Date).toISOString(),read_only:!0,day_starts_at:0,day_ends_at:24},nonReservableCalendar:!1,isLoaded:!1,currentlySelected:[],events:[],reservationSlotLimit:null,minuteBank:null,rescheduleErr:!1,reserveErr:!1,updateErr:!1,appointments:[],sessionPendingLessons:[],sessionCancelledLessons:[],sessionRescheduledLessons:[],prevRescheduledLessons:[],originalReschedulingLesson:{},updatedReschedulingLesson:{},isCancelling:!1,isCancellingConfirmation:!1,isRescheduling:!1,modalTitleText:"Appointment details",selectedHostedBy:null,selectedEventData:null}},methods:{imageSourceEdit:De,fetchUserData:ke,deepCopy:function(e){return JSON.parse(JSON.stringify(e))},formatAMPM:function(e){var t=e.getHours(),a=e.getMinutes(),n=t>=12?"pm":"am";t%=12,t=t||12,a=a<10?"0"+a:a;var s=t+":"+a+n;return s},getRescheduleTime:function(){if(null!=this.selectedEventData){var e=ee()(this.selectedEventData.from).add(this.reservationLength,"minutes").toISOString();return"".concat(this.formatAMPM(new Date(this.selectedEventData.from))," - ").concat(this.formatAMPM(new Date(e)))}},getAppointmentTime:function(){var e=this;if(null!=this.selectedEventData){var t=this.appointments.find((function(t){return t.from==e.selectedEventData.from}));if(void 0!=t)return"".concat(this.formatAMPM(new Date(t.from))," - ").concat(this.formatAMPM(new Date(t.to)))}},rescheduleAppointment:function(){var e=this,t=this.originalReschedulingLesson._id;p.a.put("".concat(this.host,"/schedule/appointment/").concat(t),{status:"pending",from:this.updatedReschedulingLesson.from,to:this.updatedReschedulingLesson.to},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){if(200==t.status){e.rescheduleSlotLimit--,p.a.put("".concat(e.host,"/transaction/packageTransaction/").concat(e.$route.params.packageTransactionId),{remainingReschedules:e.rescheduleSlotLimit},{headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){console.log(e)})),e.$bvModal.hide("reschedule-modal"),e.prevRescheduledLessons.push(e.deepCopy(e.originalReschedulingLesson)),e.sessionRescheduledLessons.push(e.deepCopy(e.updatedReschedulingLesson));var a=e.appointments.findIndex((function(t){return t.from==e.originalReschedulingLesson.from}));e.appointments[a]=e.deepCopy(e.updatedReschedulingLesson),e.sessionPendingLessons=e.sessionPendingLessons.filter((function(t){return t.from!=e.originalReschedulingLesson.from}));for(var n=function(t){var a=e.events.find((function(a){return void 0!=a.from&&a.data.from==ee()(e.originalReschedulingLesson.from).add(30*t,"minutes").toISOString()}));a&&(a.data.reservedBy="",a.data.status="")},s=0;s<=e.reservationLength/30-1;s++)n(s);for(var i=function(a){var n=e.events.find((function(t){return void 0!=t.from&&t.data.from==ee()(e.updatedReschedulingLesson.from).add(30*a,"minutes").toISOString()}));n&&(n.data.reservedBy=t.data.reservedBy,n.data.status=t.data.status)},r=0;r<=e.reservationLength/30-1;r++)i(r)}e.resetOnCancel("update-modal")})).catch((function(e){console.log(e)}))},isOnSameDay:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},prepareReschedule:function(){var e=this,t=this.appointments.find((function(t){return t.from==e.selectedEventData.from})),a=new Date(t.from),n=new Date;this.isOnSameDay(a,n)?this.updateErr=!0:(this.originalReschedulingLesson=this.deepCopy(t),this.isRescheduling=!0,this.$bvModal.hide("update-modal"))},resetOnCancel:function(e){this.isRescheduling=!1,this.isCancelling=!1,this.isCancellingConfirmation=!1,this.originalReschedulingLesson={},this.updatedReschedulingLesson={},this.modalTitleText="Appointment details",this.$bvModal.hide(e)},languageLevelBars:we,onClick:function(e){var t=this,a=e.from,n=ee()(a).add(this.reservationLength,"minutes").toISOString(),s=new Date>new Date(a),i=this.isOnSameDay(new Date(a),new Date),r=this.currentlySelected.findIndex((function(e){return e.from==a}));this.selectedEventData=this.deepCopy(e);var o=this.reservationLength/30-1,c=this.events.find((function(e){return e.data.from==ee()(a).add(30*o,"minutes").toISOString()}));if(-1!=r)return this.reservationSlotLimit+=1,void(this.currentlySelected=this.currentlySelected.filter((function(e,t){return t!==r})));if(!s&&void 0!=c){for(var l=!0,u=0!=this.appointments.filter((function(e){return e.from==a&&e.reservedBy==t.reservedBy})).length,d=function(e){var n=ee()(a).add(30*e,"minutes").toISOString(),s=t.events.find((function(e){return e.from==n})),i=void 0;if(void 0!=s){var r="cancelled"==s.data.status&&s.data.reservedBy==t.reservedBy,o=("pending"==s.data.status||"confirmed"==s.data.status)&&s.data.reservedBy==t.reservedBy,c=""==s.data.status||"cancelled"==s.data.status&&"schedule change"!=s.data.cancellationReason&&s.data.reservedBy!=t.reservedBy&&!r;i=c||o,t.isRescheduling?l=""==s.data.status||"cancelled"==s.data.status&&"schedule change"!=s.data.cancellationReason&&s.data.reservedBy!=t.reservedBy||o:(l=l&&!o&&c&&i,o&&u&&(t.$bvModal.show("update-modal"),t.cancelStartTime=a))}},h=0;h<=o;h++)d(h);if(!l||this.isRescheduling||0==this.reservationSlotLimit||i){if(l&&this.isRescheduling){for(var p,m=ee()(a).isBetween(ee()(this.originalReschedulingLesson.from),ee()(this.originalReschedulingLesson.to))||ee()(n).isBetween(ee()(this.originalReschedulingLesson.from),ee()(this.originalReschedulingLesson.to)),f=0;f<this.appointments.length;f++)p=p||ee()(a).isBetween(ee()(this.appointments[f].from),ee()(this.appointments[f].to))||ee()(n).isBetween(ee()(this.appointments[f].from),ee()(this.appointments[f].to));p&&!m||-1!=this.appointments.findIndex((function(e){return e.from==a}))||(this.$bvModal.show("reschedule-modal"),this.updatedReschedulingLesson=this.deepCopy(this.originalReschedulingLesson),this.updatedReschedulingLesson.from=a,this.updatedReschedulingLesson.to=n)}}else{var v=Object(Te["a"])(this.currentlySelected);if(0==this.currentlySelected.length)this.reservationSlotLimit-=1,this.currentlySelected.push(this.appointmentFactory(this.hostedBy,this.reservedBy,this.$route.params.packageTransactionId,a,n));else for(var g=!1,y=0;y<v.length;y++)g=g||ee()(a).isBetween(ee()(this.currentlySelected[y].from),ee()(this.currentlySelected[y].to))||ee()(n).isBetween(ee()(this.currentlySelected[y].from),ee()(this.currentlySelected[y].to)),g||y!=this.currentlySelected.length-1||(this.currentlySelected.push(this.appointmentFactory(this.hostedBy,this.reservedBy,this.$route.params.packageTransactionId,a,n)),this.reservationSlotLimit-=1)}}},onEventClassBind:function(e,t){for(var a=!1,n=function(n){var s=void 0;s=0==n?ee()(e).toISOString():ee()(e).subtract(30*n,"minutes").toISOString(),a=a||0!=t.filter((function(t){return t.from==e||t.from==s})).length},s=0;s<=this.reservationLength/30-1;s++)n(s);return a},cancelAppointment:function(e){var t=this;this.modalTitleText="Are you sure you want to cancel the appointment?";var a=this.appointments.find((function(t){return t.from==e}))._id;this.isCancelling&&this.isCancellingConfirmation&&p.a.put("".concat(this.host,"/schedule/appointment/").concat(a),{status:"cancelled",cancellationReason:"student cancel"},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(a){if(200==a.status){t.$bvModal.hide("update-modal"),t.appointments=t.appointments.filter((function(t){return t.from!=e})),t.sessionPendingLessons=t.sessionPendingLessons.filter((function(t){return t.from!=e})),t.sessionCancelledLessons.push(a.data),t.resetOnCancel();for(var n=function(n){var s=t.events.find((function(t){return void 0!=t.from&&t.data.from==ee()(e).add(30*n,"minutes").toISOString()}));s&&(s.data.cancellationReason=a.data.cancellationReason,s.data.status=a.data.status)},s=0;s<=t.reservationLength/30-1;s++)n(s)}})).catch((function(e){console.log(e)}))},createAppointments:function(){for(var e=this,t=function(t){var a=e.currentlySelected[t].from,n=e.events.find((function(e){return void 0!=e.from&&e.data.from==a})).data.from;p.a.post("".concat(e.host,"/schedule/appointment"),e.currentlySelected[t],{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){if(200==t.status){if(e.$bvModal.show("complete-modal"),e.appointments.push(t.data),n)for(var a=function(a){var s=e.events.find((function(e){return void 0!=e.from&&e.data.from==ee()(n).add(30*a,"minutes").toISOString()}));s&&(s.data.reservedBy=t.data.reservedBy,s.data.status=t.data.status)},s=0;s<=e.reservationLength/30-1;s++)a(s);p.a.put("".concat(e.host,"/transaction/packageTransaction/").concat(e.$route.params.packageTransactionId),{remainingAppointments:e.reservationSlotLimit},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){var a;200==t.status&&((a=e.sessionPendingLessons).push.apply(a,Object(Te["a"])(e.currentlySelected)),e.currentlySelected=[])})).catch((function(e){console.log(e)}))}})).catch((function(t){e.reserveErr=!0}))},a=0;a<this.currentlySelected.length;a++)t(a)},getScheduleData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=ee()().subtract(1,"month"),n=ee()().add(3,"month"),t.next=4,ke(e.hostedBy);case 4:e.selectedHostedBy=t.sent,p.a.get("".concat(e.host,"/schedule/").concat(e.hostedBy,"/availableTime/").concat(a.toISOString(),"/").concat(n.toISOString())).then((function(t){200==t.status&&p.a.get("".concat(e.host,"/schedule/").concat(e.hostedBy,"/appointment/").concat(a.toISOString(),"/").concat(n.toISOString())).then((function(a){if(200==a.status){for(var n=t.data.concat(a.data),s=0;s<n.length;s++)e.intervals(n[s]);e.appointments=a.data,e.isLoaded=!0}}))}));case 6:case"end":return t.stop()}}),t)})))()},appointmentFactory:function(e,t,a,n,s){var i={hostedBy:e,reservedBy:t,from:n,to:s,packageTransactionId:a};return i},removeSelection:function(e){this.currentlySelected=this.currentlySelected.filter((function(t){return t.from!=e}))},intervals:function(e){var t=this,a=ee()(e.from),n=ee()(e.from).minute(30*Math.ceil(a.minute()/30)),s=ee()(e.to),i=e.reservedBy?e.reservedBy:"",r=e.hostedBy?e.hostedBy:"",o=e.status?e.status:"",c=[],l=ee()(n);while(l<=s)c.push(l.toISOString()),l=l.add(30,"minutes");for(var u=0;u<c.length;u++)u!=c.length-1&&function(){var a={from:c[u],to:c[u+1],data:{_id:e._id,from:c[u],to:c[u+1],reservedBy:i,hostedBy:r,status:o,cancellationReason:e.cancellationReason||""}},n=t.events.findIndex((function(e){e.data.from,a.from}));-1==n&&(t.events.push(a),t.events=Object(Te["a"])(new Map(t.events.map((function(e){return[e["from"],e]}))).values()))}()},parseISOString:function(e){var t=e.split("T");return t[1].substring(0,5)}}},Oe=Ae,Me=(a("bdda"),Object(c["a"])(Oe,Ee,Ie,!1,null,null,null)),je=Me.exports,Ne=(a("caad"),a("2532"),function(e,t){t||(t=[{value:"EN",text:"English"},{value:"CN",text:"Chinese"},{value:"KR",text:"Korean"},{value:"JP",text:"Japanese"}]);var a=t.find((function(t){return t.value==e||e.includes(t.value)}));if(void 0!=a)return a.text}),Ue=Ne,qe=(a("466d"),function(e){if(void 0!=e||""!=e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/,a=e.match(t);return a&&11==a[2].length?"https://www.youtube.com/embed/".concat(a[2]):(alert("Not a valid Youtube link!"),"")}}),Fe=qe,ze=a("4208"),He=a.n(ze);ee.a.extend(He.a);var Xe=function(e,t){return"fromNow"==t?ee()(e).fromNow():ee()(e).format(t)},We=Xe,Ye=(a("f7aa"),a("260b")),Ge=(a("588e"),{apiKey:"AIzaSyDoKp6NjwpwxutLY5due5HSVgsndibEBL8",authDomain:"japanese-221819.firebaseapp.com",databaseURL:"https://japanese-221819.firebaseio.com",projectId:"japanese-221819",storageBucket:"japanese-221819.appspot.com",messagingSenderId:"109689353627",appId:"1:109689353627:web:28a157fb3e12a2662c9d3e"}),Ve=Ye["a"].initializeApp(Ge),Je={mixins:[ae["validationMixin"]],components:{Cropper:te["a"],Preview:te["b"],RegistrationForm:fe,EditCalendar:Be,ViewCalendar:je},name:"Dashboard",created:function(){this.$emit("update:layout",D)},computed:{storeUserData:{get:function(){return C.getters.userData},set:function(e){return e}}},validations:{hourlyRate:{myRate:{required:ne["required"],between:Object(ne["between"])(0,1e4)}}},data:function(){return{profileImage:{original:null,updated:null,cropperImage:null,previewCropperImage:{image:null,canvas:null}},hourlyRate:{selectedCurrency:"SGD",myRate:0,currencyIcon:"$",offering:[]},adminToTeacherPkgId:"601b440caa3c3a4380857080",adminId:"5ffd141ad1948a0e6c7de492",isEditingImage:!1,isEditingBio:!1,editedBio:"",isHoveringPic:!1,userData:null,userId:"",appointments:[],formData:{nonFluentLanguage:"JP",fluentLanguage:"EN",level:"B2",teacherType:"unlicensed",license:null},host:"api",loading:!0,maxInputLength:2e3,optionsPrimaryLanguage:[{value:"JP",text:"Japanese"},{value:null,text:"Other languages coming soon!",disabled:!0}],optionsLevel:[{value:"A1",text:"Beginner (A1)"},{value:"A2",text:"Elementary (A2)"},{value:"B1",text:"Intermediate (B1)"},{value:"B2",text:"Upper Intermediate (B2)"},{value:"C1",text:"Advanced (C1)"},{value:"C2",text:"Proficient (C2)"}],optionsSecondaryLanguage:[{value:"EN",text:"English"},{value:"CN",text:"Chinese"},{value:"KR",text:"Korean"}],optionsTeacherType:[{value:"unlicensed",text:"unlicensed teacher"},{value:"licensed",text:"licensed/professional teacher"}]}},watch:{hourlyRate:{handler:function(e){this.hourlyRate.currencyIcon=this.formatString(e.selectedCurrency,["SGD","USD","JPY"],["$","$","¥"])},deep:!0}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=ee()().toISOString(),n=ee()().add(1,"week").toISOString(),e.userData=e.storeUserData,("teacher"==e.userData.role||e.userData.teacherAppPending)&&(e.hourlyRate.selectedCurrency=e.userData.teacherData.hourlyRate.currency,e.hourlyRate.myRate=e.userData.teacherData.hourlyRate.amount,e.userData.teacherData.packages.forEach((function(t){e.hourlyRate.offering.push(t.packageType)}))),e.userId=e.userData._id,e.profileImage.original=e.userData.profileImage,e.editedBio=e.userData.profileBio.trim(),t.next=9,re(e.userId,a,n);case 9:e.appointments=t.sent,s=0;case 11:if(!(s<e.appointments.length)){t.next=24;break}if(e.appointments[s].hostedBy!=e.userId){t.next=18;break}return t.next=15,ke(e.appointments[s].reservedBy);case 15:e.appointments[s].userData=t.sent,t.next=21;break;case 18:return t.next=20,ke(e.appointments[s].hostedBy);case 20:e.appointments[s].userData=t.sent;case 21:s++,t.next=11;break;case 24:e.loading=!1,i=!(0==e.userData.fluentLanguages.length&&0==e.userData.nonFluentLanguages.length&&!e.userData.region&&!e.userData.timezone),e.userData.teacherAppPending&&!i?(e.formData.nonFluentLanguage="EN",e.formData.fluentLanguage="JP",e.showModal()):i||e.showModal();case 27:case"end":return t.stop()}}),t)})))()},methods:{updatePackages:function(){var e=this;this.$v.hourlyRate.$touch(),this.$v.hourlyRate.$anyError||0==this.hourlyRate.offering.length?alert("Please offer at least one plan!"):p.a.post("".concat(this.host,"/transaction/package"),{teacherPackages:this.hourlyRate.offering,teacherId:this.userId,price:this.hourlyRate.myRate,currency:this.hourlyRate.selectedCurrency},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){200==t.status&&e.$bvModal.hide("my-packages")}))},validateState:function(e){var t=this.$v.hourlyRate[e],a=t.$dirty,n=t.$error;return a?!n:null},formatString:W,validateYoutube:Fe,languageCodeToText:Ue,ensureMaxChars:function(e){var t=e.text;if(t.length>this.maxInputLength){var a=this.$refs.quillEditor.quill;a.deleteText(this.maxInputLength,a.getLength())}},startEditBio:function(){var e=this;this.isEditingBio=!0,setTimeout((function(){var t=e.$refs.quillEditor.quill;t.setSelection(t.getLength())}))},cancelBio:function(){this.isEditingBio=!1,this.editedBio=this.userData.profileBio},saveBio:function(){var e=this;if(p.a.put("".concat(this.host,"/user/").concat(this.userData._id,"/updateProfile"),{profileBio:this.editedBio.trim()},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){200==t.status&&(e.isEditingBio=!1,e.userData.profileBio=e.editedBio.trim())})).catch((function(e){console.log(e)})),"teacher"==this.userData.role){var t=this.validateYoutube(this.userData.teacherData.introductionVideo.trim());""!=t&&p.a.put("".concat(this.host,"/teacher/").concat(this.userData._id,"/updateProfile"),{introductionVideo:this.validateYoutube(this.userData.teacherData.introductionVideo.trim())},{headers:{"X-Requested-With":"XMLHttpRequest"}})}},formatBio:function(e){if(e)return e.length<350?e:"".concat(e.substring(0,350),"...");var t="";return"teacher"==this.userData.role||this.userData.teacherAppPending?(t="<p><strong>About me</strong></p><ul><li>Where are you from? Your hobbies?</li></ul><p><strong>My qualifications</strong></p><ul><li>How long have you been teaching for? What are your qualifications/do you have a teaching license?</li></ul><p><strong>How I teach</strong></p><ul><li>How do you teach students?</li></ul>",this.editedBio=t):t="Click here to write about yourself or your goals.",this.userData.profileBio=t,t},saveProfileImage:function(){var e=this;this.$bvModal.hide("edit-pic"),this.isEditingImage=!1;try{var t={contentType:"image/png"},a=Ve.storage().ref(),n=a.child("images/".concat(this.userData._id,"_profilePic.png"));this.canvas.toBlob(function(){var a=Object(d["a"])(regeneratorRuntime.mark((function a(s){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.put(s,t);case 2:return a.next=4,n.getDownloadURL();case 4:i=a.sent,p.a.put("".concat(e.host,"/user/").concat(e.userData._id,"/updateProfile"),{profileImage:i},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){200==t.status&&(e.userData.profileImage=i)})).catch((function(e){console.log(e)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(s){console.log(s)}},resetCanvas:function(){this.canvas=null,this.profileImage.previewCropperImage.image={width:0,height:0},this.profileImage.previewCropperImage.canvas=null,this.profileImage.cropperImage=null,this.$bvModal.hide("edit-pic"),this.isEditingImage=!1},change:function(e){var t=e.coordinates,a=e.image,n=e.canvas;this.canvas=n,this.profileImage.previewCropperImage={coordinates:t,image:a}},editProfile:function(){this.$bvModal.show("edit-pic")},imageSourceEdit:De,formatDate:We,fetchUserData:ke,languageLevelBars:we,showModal:function(){this.$bvModal.show("reg-form")},onFormSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$bvModal.hide("reg-form"),null==e.formData.license){t.next=10;break}return a=Ve.storage().ref(),n=a.child("teachingLicenses/".concat(e.userData._id,"_license.png")),t.next=6,n.put(e.formData.license);case 6:return t.next=8,n.getDownloadURL();case 8:s=t.sent,p.a.put("".concat(e.host,"/teacher/").concat(e.userData._id,"/updateProfile"),{licensePath:s,teacherType:"licensed"},{headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){console.log(e)}));case 10:case"end":return t.stop()}}),t)})))()},selectFile:function(e,t){var a=this,n=e.target;if(n.files&&n.files[0])if("img"==t){var s=new FileReader;s.onload=function(e){a.profileImage.cropperImage=e.target.result},s.readAsDataURL(n.files[0]),this.isEditingImage=!this.isEditingImage}else"pdf"==t&&(this.formData.license=n.files[0])},adminTeacherTrans:function(){var e=this,t={hostedBy:this.adminId,packageId:this.adminToTeacherPkgId,reservedBy:this.userData._id,terminationDate:ee()().add(1,"month").toDate(),remainingAppointments:1,remainingReschedules:5,reservationLength:60};p.a.post("".concat(this.host,"/transaction/packageTransaction"),t,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(a){200==a.status&&e.$router.push("/calendar/".concat(t.hostedBy,"/").concat(a.data._id))})).catch((function(e){console.log(e)}))}}},Ke=Je,Ze=(a("2fe3"),Object(c["a"])(Ke,K,Z,!1,null,null,null)),Qe=Ze.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"TeacherApplication"},[a("p",[e._v("forms/agreements go here")]),a("button",{on:{click:e.redirect}},[e._v("Sign up for a Teacher Account now!")])])},tt=[],at={name:"Dashboard",created:function(){this.$emit("update:layout",D)},data:function(){return{}},methods:{redirect:function(){this.$router.push("/signup?teacherSignup=true").catch((function(e){}))}}},nt=at,st=(a("8957"),Object(c["a"])(nt,et,tt,!1,null,null,null)),it=st.exports,rt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ot=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("p",[e._v("(404) Page Not Found")])])}],ct={},lt=Object(c["a"])(ct,rt,ot,!1,null,null,null),ut=lt.exports,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.viewingUserData?a("div",{staticClass:"user-profile"},[e.loading?a("div",[a("div",{staticClass:"d-flex justify-content-center my-4"},[a("b-spinner",{attrs:{label:"Loading..."}})],1)]):a("div",{staticClass:"mt-5"},[e.viewingUserData.teacherData?a("teacher-profile",{attrs:{viewingUserData:e.viewingUserData,myUserData:e.myUserData}}):a("student-profile",{attrs:{viewingUserData:e.viewingUserData,myUserData:e.myUserData}})],1)]):e._e()},ht=[],pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teacher-profile"},[a("b-row",[a("b-col"),a("b-col",{staticStyle:{padding:"0 0 0 0 !important"},attrs:{md:"5"}},[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"embed-responsive-item",attrs:{src:this.viewingUserData.teacherData.introductionVideo,allowfullscreen:""}})]),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("div",{staticClass:"my-2"},[a("span",[a("h3",{staticStyle:{display:"inline"}},[e._v(" "+e._s(this.viewingUserData.name)+" ")]),this.viewingUserData.teacherData.isApproved||this.isApproved?a("b-icon-patch-check-fll",{staticClass:"ml-2 patch-icon",attrs:{title:"Manabu Verified Teacher"}}):a("b-icon-patch-minus-fll",{staticClass:"ml-2 patch-icon",attrs:{title:"Teacher application pending"}}),e.viewingUserData._id!=e.myUserData._id&&e.myUserData._id?a("b-dropdown",{staticClass:"float-right no-padding",attrs:{size:"lg",variant:"transparent","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"fas fa-ellipsis-v"})]},proxy:!0}],null,!1,3452768261)},["admin"==e.myUserData.role?a("div",[e.viewingUserData.teacherAppPending&&!this.isApproved?a("b-dropdown-item",{on:{click:function(t){return e.approveTeacher(e.viewingUserData._id)}}},[e._v(" Approve application ")]):e._e(),e.viewingUserData.teacherData.licensePath&&"licensed"==e.viewingUserData.teacherData.teacherType?a("b-dropdown-item",{attrs:{href:e.viewingUserData.teacherData.licensePath,target:"_blank"}},[e._v(" View professional license ")]):e._e()],1):e._e(),a("b-dropdown-item",[e._v("Report")]),a("b-dropdown-item",[e._v("Block")])],1):e._e(),a("p",{staticClass:"card-text"},[a("small",{staticClass:"text-muted"},[e._v("Last online "+e._s(e.formatDate(e.viewingUserData.lastOnline,"fromNow")))])])],1),a("div",{staticClass:"text-muted font-weight-light"},[a("div",[a("span",{staticStyle:{"font-size":"1.1rem"}},[e._v(" "+e._s(e.formatString(this.viewingUserData.teacherData.teacherType,["licensed","unlicensed"],["Professional Teacher --","Community Teacher --"]))+" "),e._l(e.viewingUserData.fluentLanguages,(function(t){return a("div",{key:t,staticClass:"mr-1",staticStyle:{display:"inline"}},[e._v(" "+e._s(e.languageCodeToText(t))+" "),e._l(5,(function(n,s){return a("span",{key:s,staticClass:"level",class:e.languageLevelBars(t,s)})}))],2)})),e._l(e.viewingUserData.nonFluentLanguages,(function(t){return a("div",{key:t,staticStyle:{display:"inline"}},[e._v(" "+e._s(e.languageCodeToText(t))+" "),e._l(5,(function(n,s){return a("span",{key:s,staticClass:"level",class:e.languageLevelBars(t,s)})}))],2)}))],2)])]),a("div",{staticClass:"mt-3",domProps:{innerHTML:e._s(this.viewingUserData.profileBio)}})])])],1)],1)])]),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"card profile-card mb-3"},[a("div",{staticClass:"card-body"},[e._v(e._s(e.viewingUserData.teacherData.hourlyRate))])]),a("div",{staticClass:"card profile-card mb-3"},[a("b-button",{staticClass:"mx-3 my-3",attrs:{variant:"dark"},on:{click:function(t){e.showCalendar=!e.showCalendar}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.showCalendar,expression:"!showCalendar"}]},[e._v("View")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showCalendar,expression:"showCalendar"}]},[e._v("Hide")]),e._v(" Calendar")]),a("view-calendar",{directives:[{name:"show",rawName:"v-show",value:e.showCalendar,expression:"showCalendar"}],staticClass:"mt-2",attrs:{hostedByProp:e.viewingUserData._id}})],1)]),a("b-col")],1)],1)},mt=[],ft={name:"TeacherProfile",data:function(){return{isApproved:!1,host:"api",showCalendar:!1,minimumPkgPrice:0}},components:{ViewCalendar:je},props:{viewingUserData:Object,myUserData:Object},methods:{formatDate:We,languageCodeToText:Ue,imageSourceEdit:De,languageLevelBars:we,formatString:W,approveTeacher:function(e){var t=this;p.a.put("".concat(this.host,"/user/").concat(e,"/updateProfile"),{role:"teacher"},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(a){200==a.status&&p.a.put("".concat(t.host,"/teacher/").concat(e,"/updateProfile"),{isApproved:!0,dateApproved:new Date},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){200==e.status&&(t.isApproved=!0)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},mounted:function(){}},vt=ft,gt=(a("bbd8"),Object(c["a"])(vt,pt,mt,!1,null,null,null)),yt=gt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"student-profile"},[a("b-row",[a("b-col"),a("b-col",{staticStyle:{padding:"0 0 0 0 !important"},attrs:{md:"5"}},[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"embed-responsive-item",attrs:{src:"https://www.youtube.com/embed/NpEaa2P7qZI",allowfullscreen:""}})]),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v("Card title")]),a("p",{staticClass:"card-text"},[e._v("This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.")]),a("p",{staticClass:"card-text"},[a("small",{staticClass:"text-muted"},[e._v("Last updated 3 mins ago")])])])])]),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"card profile-card mb-3"},[a("div",{staticClass:"card-body"},[e._v(" Pricing goes here ")])])]),a("b-col")],1)],1)},wt=[],Ct={name:"StudentProfile",data:function(){return{}},props:{viewingUserData:Object,myUserData:Object},methods:{}},_t=Ct,kt=(a("2ffc"),Object(c["a"])(_t,bt,wt,!1,null,null,null)),xt=kt.exports,Dt={name:"UserProfile",created:function(){this.$emit("update:layout",D)},components:{TeacherProfile:yt,StudentProfile:xt},computed:{storeUserData:{get:function(){return C.getters.userData},set:function(e){return e}}},data:function(){return{myUserData:null,viewingUserData:null,loading:!0}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ke(e.$route.params.uId);case 3:e.viewingUserData=t.sent,e.myUserData=e.storeUserData,e.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$router.push("/404").catch((function(e){}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},methods:{fetchUserData:ke,imageSourceEdit:De,languageLevelBars:we,formatBio:function(e){return e||"This user has not written a profile yet."}}},St=Dt,Rt=(a("16c0"),Object(c["a"])(St,dt,ht,!1,null,null,null)),Lt=Rt.exports;n["default"].use(m["a"]);var Bt="api",Et=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(Bt,"/me"),{withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"}}).catch((function(e){t=null,C.commit("setLoggedIn",!1)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function It(e,t){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(d["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!C.getters.isLoggedIn){e.next=5;break}C.commit("setLoggedIn",!0),a(t),e.next=9;break;case 5:return e.next=7,Et();case 7:n=e.sent,null!=n&&n.data?(C.commit("setUserData",n.data),C.commit("setLoggedIn",!0),a(t)):(C.commit("setLoggedIn",!1),C.commit("setUserData",{}),a());case 9:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}var Pt=new m["a"]({mode:"history",routes:[{path:"/",name:"Home",component:B,meta:{title:"Manabu"},beforeEnter:function(e,t,a){It("/dashboard",a)}},{path:"/apply",name:"Apply",component:it,meta:{title:"Become a Teacher"},beforeEnter:function(e,t,a){It(void 0,a)}},{path:"/signup",name:"Sign Up",component:O,meta:{title:"Sign Up"},beforeEnter:function(e,t,a){It("/dashboard",a)}},{path:"/login",name:"Log In",component:F,meta:{title:"Log In"},beforeEnter:function(e,t,a){It("/dashboard",a)}},{path:"/dashboard",name:"Dashboard",component:Qe,meta:{title:"Dashboard"},beforeEnter:function(e,t,a){"/"!=e&&C.getters.isLoggedIn?It(void 0,a):a("/")}},{path:"/logout",name:"Logout",beforeEnter:function(e,t,a){n["default"].$cookies.set("hp","").set("sig",""),C.commit("setUserData",null),C.commit("setLoggedIn",!1),a("/")}},{path:"/user/:uId",name:"UserProfile",component:Lt,beforeEnter:function(e,t,a){It(void 0,a)}},{path:"/calendar/:hostedBy/:packageTransactionId?",name:"ViewCalendar",component:je,beforeEnter:function(e,t,a){It(void 0,a)}},{path:"/settings/",name:"Settings",component:J,beforeEnter:function(e,t,a){"/"!=e&&C.getters.isLoggedIn?It(void 0,a):a("/")}},{path:"/404",name:"NotFound",component:ut},{path:"*",redirect:"/404",beforeEnter:function(e,t,a){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:It(void 0,a);case 1:case"end":return e.stop()}}),e)})))()}}]}),$t=Pt,At=a("7386"),Ot=a("5f5b"),Mt=(a("f9e3"),a("2dd8"),a("2b27")),jt=a.n(Mt),Nt=a("2b88"),Ut=a.n(Nt),qt=a("f13c"),Ft=a.n(qt),zt=a("953d"),Ht=a.n(zt),Xt=(a("a753"),a("8096"),a("14e1"),{modules:{toolbar:[["bold","italic"],[{list:"ordered"},{list:"bullet"}],[],["clean"]]}});n["default"].use(Ut.a),n["default"].use(jt.a),n["default"].component("BIconPatchCheckFll",At["m"]),n["default"].component("BIconPatchMinusFll",At["n"]),n["default"].$cookies.config("1d"),n["default"].use(Ft.a),n["default"].use(Ht.a,Xt),n["default"].config.productionTip=!1,n["default"].use(Ot["a"]),new n["default"]({router:$t,render:function(e){return e(u)}}).$mount("#app")},6158:function(e,t,a){e.exports=a.p+"img/no-profile.849c29fe.webp"},6577:function(e,t,a){},7174:function(e,t,a){},"79f0":function(e,t,a){},8434:function(e,t,a){"use strict";a("fa53")},8527:function(e,t,a){},"85ec":function(e,t,a){},"88d7":function(e,t,a){},8957:function(e,t,a){"use strict";a("c9cc")},"8b71":function(e,t,a){"use strict";a("88d7")},"8d1b":function(e,t,a){"use strict";a("2dad")},"98a8":function(e,t,a){e.exports=a.p+"img/1.c6269784.jpg"},a1f3:function(e,t,a){},bbd8:function(e,t,a){"use strict";a("6577")},bdda:function(e,t,a){"use strict";a("3843")},c967:function(e,t,a){},c9cc:function(e,t,a){},ef23:function(e,t,a){"use strict";a("c967")},fa53:function(e,t,a){}});
//# sourceMappingURL=app.e9a3b4a3.js.map