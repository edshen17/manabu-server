(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78321fac"],{"354a":function(t,e,a){"use strict";var s=a("d79d"),r=a.n(s),i=function(t,e,a,s,i){return e&&a||(e="SGD",a="SGD"),r.a.rates=i,s?r.a.convert(t,{from:e,to:a}):Math.round(r.a.convert(t,{from:e,to:a}))};e["a"]=i},6158:function(t,e,a){t.exports=a.p+"img/no-profile.849c29fe.webp"},"7db0":function(t,e,a){"use strict";var s=a("23e7"),r=a("b727").find,i=a("44d2"),n=a("ae40"),o="find",c=!0,d=n(o);o in[]&&Array(1)[o]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!d},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},"92b7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("div",[a("div",{staticClass:"d-flex justify-content-center my-4"},[a("b-spinner",{attrs:{label:"Loading..."}})],1)]):a("div",{staticClass:"Payment mt-5"},[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{lg:"2"}}),a("b-col",{staticStyle:{"z-index":"100"},attrs:{lg:"5"}},[a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"mb-3"},[t._v("Payment Method")]),t._l(t.paymentMethods,(function(e){return a("div",{key:e.method},[a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("div",{staticClass:"card-body price-card",class:{"active-card":e.method==t.selectedMethod},on:{click:function(a){return t.onMethodChange(e.method)}}},[a("h4",{staticClass:"text-muted font-weight-light"},[t._v(" "+t._s(e.method)+" ")])])])])}))],2)])]),a("b-col",{staticClass:"button-wrapper",attrs:{lg:"3"}},[a("div",{staticClass:"sticky-top"},[a("div",{staticClass:"card profile-card mb-3 shadow border-0"},[a("h5",{staticClass:"font-weight-light mt-3 mx-3"},[a("img",{staticClass:"mid-image mr-3 mb-3",attrs:{alt:"100x100",src:t.imageSourceEdit(t.validatedData.teacherUserData.profileImage)}}),a("div",{staticClass:"payment-card",staticStyle:{display:"block"}},[a("h4",[t._v(t._s(t.validatedData.teacherUserData.name))]),a("p",{staticClass:"text-capitalize light-bold"},[t._v(" "+t._s(t.validatedData.selectedPlan)+" plan ("+t._s(t.validatedData.selectedDuration)+" minutes)")]),a("h5",{staticClass:"mt-5"},[t._v("Subtotal: "+t._s(t.subTotal.toFixed(2))+" "+t._s(t.userData.settings.currency))]),a("h5",[t._v("Processing fee: "+t._s((t.subTotal*t.processingRate).toFixed(2))+" "+t._s(t.userData.settings.currency))]),a("h5",[t._v("Total: "+t._s((t.totalPrice*(1+t.processingRate)).toFixed(2))+" "+t._s(t.userData.settings.currency))])])]),a("b-button",{staticClass:"mx-3 my-3 manabu-blue",attrs:{variant:"dark",disabled:t.isDisabled},on:{click:t.proceedPayment}},[t._v("PAY NOW")])],1)])]),a("b-col",{attrs:{lg:"2"}})],1)],1)],1)},r=[],i=(a("7db0"),a("e8c2")),n=a("f459"),o=a("354a"),c=a("07a4"),d=a("bc3a"),l=a.n(d),u={name:"Payment",created:function(){this.$emit("update:layout",i["a"])},props:{transactionData:Object,myUserData:Object},computed:{storeUserData:{get:function(){return c["a"].getters.userData},set:function(t){return t}}},data:function(){return{loading:!0,isDisabled:!0,host:"/api",paymentMethods:[{method:"PayPal",processingRate:.045}],selectedMethod:null,validatedData:null,subTotal:0,totalPrice:0,userData:null}},methods:{onMethodChange:function(t){this.selectedMethod=t,this.isDisabled=!1,this.processingRate=this.paymentMethods.find((function(e){return e.method==t})).processingRate},imageSourceEdit:n["a"],proceedPayment:function(){if("PayPal"==this.selectedMethod){var t=this.transactionData||JSON.parse(localStorage.getItem("transactionData"));t.selectedMethod=this.selectedMethod,l.a.post("/api/pay",t,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(t){if(200==t.status)return window.location.href=t.data.redirectLink,!1})).catch((function(t){}))}}},mounted:function(){var t=this;try{var e=this.transactionData||JSON.parse(localStorage.getItem("transactionData")),a=this.myUserData||this.storeUserData;if(this.userData=a,e){var s=e.hostedBy,r=e.reservedBy,i=e.selectedPlan,n=e.selectedDuration,c=e.selectedSubscription,d=e.selectedPackageId,u=e.selectedLanguage;return l.a.get("".concat(this.host,"/utils/verifyTransactionData"),{params:{hostedBy:s,reservedBy:r,selectedPlan:i,selectedDuration:n,selectedSubscription:c,selectedPackageId:d,selectedLanguage:u,selectedMethod:null}},{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(200==e.status){t.loading=!1,t.validatedData=e.data,console.log(t.validatedData);var s=e.data,r=s.exchangeRate,i=s.transactionPrice;t.subTotal=Object(o["a"])(i,"SGD",a.settings.currency,!0,r),t.processingRate=0,t.totalPrice=t.subTotal*(t.processingRate+1)}}))}}catch(f){console.log(f)}}},f=u,h=(a("b781"),a("2877")),p=Object(h["a"])(f,s,r,!1,null,null,null);e["default"]=p.exports},b781:function(t,e,a){"use strict";a("f213")},d79d:function(t,e,a){
/*!
 * money.js / fx() v0.2
 * Copyright 2014 Open Exchange Rates
 *
 * JavaScript library for realtime currency conversion and exchange rate calculation.
 *
 * Freely distributable under the MIT license.
 * Portions of money.js are inspired by or borrowed from underscore.js
 *
 * For details, examples and documentation:
 * http://openexchangerates.github.io/money.js/
 */
(function(a,s){var r=function(t){return new c(t)};r.version="0.2";var i=a.fxSetup||{rates:{},base:""};r.rates=i.rates,r.base=i.base,r.settings={from:i.from||r.base,to:i.to||r.base};var n=r.convert=function(t,e){if("object"===typeof t&&t.length){for(var a=0;a<t.length;a++)t[a]=n(t[a],e);return t}return e=e||{},e.from||(e.from=r.settings.from),e.to||(e.to=r.settings.to),t*o(e.to,e.from)},o=function(t,e){var a=r.rates;if(a[r.base]=1,!a[t]||!a[e])throw"fx error";return e===r.base?a[t]:t===r.base?1/a[e]:a[t]*(1/a[e])},c=function(t){"string"===typeof t?(this._v=parseFloat(t.replace(/[^0-9-.]/g,"")),this._fx=t.replace(/([^A-Za-z])/g,"")):this._v=t},d=r.prototype=c.prototype;d.convert=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this._v),n.apply(r,t)},d.from=function(t){var e=r(n(this._v,{from:t,to:r.base}));return e._fx=r.base,e},d.to=function(t){return n(this._v,{from:this._fx?this._fx:r.settings.from,to:t})},t.exports&&(e=t.exports=r),e.fx=r})(this)},f213:function(t,e,a){},f459:function(t,e,a){"use strict";function s(t){return""==t?a("6158"):t}e["a"]=s}}]);
//# sourceMappingURL=chunk-78321fac.37ee4389.js.map